<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>modules/webpack/utils/index.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>

    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav class="nav">
    <h2><a href="index.html">Home</a></h2><h3>Tutorials</h3><ul><li><a href="tutorial-Configs.html">Configs</a></li><li><a href="tutorial-Importing Accounts.html">Importing Accounts</a></li><li><a href="tutorial-Setup Error Monitoring.html">Setup Error Monitoring</a></li><li><a href="tutorial-Substitute mode.html">Substitute mode</a></li><li><a href="tutorial-The Teacher Dashboard.html">The Teacher Dashboard</a></li><li><a href="tutorial-Web App System Requirements.html">Web App System Requirements</a></li></ul><h3>API</h3><ul><li><a href="#">/api/account/</a><ul class='methods'><li data-type='method'><a href="module-api_accounts.html#~searchAccounts">GET</a></li></ul></li><li><a href="#">/api/account/:accountID/passes</a><ul class='methods'><li data-type='method'><a href="module-api_account_user.html#~getUserPasses">GET</a></li></ul></li><li><a href="#">/api/account/:accountID/send-activation/</a><ul class='methods'><li data-type='method'><a href="module-api_account_user.html#~sendActivationEmail">POST</a></li></ul></li><li><a href="#">/api/account/email/:email/</a><ul class='methods'><li data-type='method'><a href="module-api_accounts.html#~getAccountsByEmail">GET</a></li></ul></li><li><a href="#">/api/account/groupfields/</a><ul class='methods'><li data-type='method'><a href="module-api_accounts.html#~handleUpdateAccountGroupFieldsByUser">PATCH</a></li></ul></li><li><a href="#">/api/account/hasClasses</a><ul class='methods'><li data-type='method'><a href="module-api_accounts.html#~getAccountsWithClasses">GET</a></li></ul></li><li><a href="#">/api/account/id/:id</a><ul class='methods'><li data-type='method'><a href="module-api_accounts.html#~handleGetAccountsById">GET</a></li></ul></li><li><a href="#">/api/account/location/datetime/:dateTime/id/:id/</a><ul class='methods'><li data-type='method'><a href="module-api_accounts.html#~getCurrentLocation">GET</a></li></ul></li><li><a href="#">/api/account/name/:name/</a><ul class='methods'><li data-type='method'><a href="module-api_accounts.html#~handleGetAccountsByName">GET</a></li></ul></li><li><a href="#">/api/account/new/:userGroup/</a><ul class='methods'><li data-type='method'><a href="module-api_accounts.html#~handleNewAccount">POST</a></li></ul></li><li><a href="#">/api/account/password/</a><ul class='methods'><li data-type='method'><a href="module-api_accounts.html#~updateUserPassword">PATCH</a></li></ul></li><li><a href="#">/api/account/schedule/:dashboard</a><ul class='methods'><li data-type='method'><a href="module-api_userSchedule.html#~setUserSchedule">POST</a></li><li data-type='method'><a href="module-api_userSchedule.html#~updateUserSchedule">PUT</a></li><li data-type='method'><a href="module-api_userSchedule.html#~updateUserSchedule">PATCH</a></li></ul></li><li><a href="#">/api/account/schedule/[:id]</a><ul class='methods'><li data-type='method'><a href="module-api_userSchedule.html#~getAllSchedules">GET</a></li></ul></li><li><a href="#">/api/account/schedule/student/:id</a><ul class='methods'><li data-type='method'><a href="module-api_userSchedule.html#~getSchedulesForStudentDash">GET</a></li></ul></li><li><a href="#">/api/account/schedule/teacher/:id</a><ul class='methods'><li data-type='method'><a href="module-api_userSchedule.html#~getSchedulesForTeacherDash">GET</a></li></ul></li><li><a href="#">/api/account/userGroup/:userGroup/</a><ul class='methods'><li data-type='method'><a href="module-api_accounts.html#~handleGetAccountsByUserGroup">GET</a></li></ul></li><li><a href="#">/api/account/userGroup/:userGroup/name/:name/</a><ul class='methods'><li data-type='method'><a href="module-api_accounts.html#~handleGetAccountsByNameAndUserGroup">GET</a></li></ul></li><li><a href="#">/api/auth/login/</a><ul class='methods'><li data-type='method'><a href="module-authRESTAPI.html#~handleAuthLogin">POST</a></li></ul></li><li><a href="#">/api/auth/login/dscm</a><ul class='methods'><li data-type='method'><a href="module-authRESTAPI.html#~loginDSCM">POST</a></li></ul></li><li><a href="#">/api/blackout/</a><ul class='methods'><li data-type='method'><a href="module-blackoutRESTAPI.html#~newBlackout">POST</a></li></ul></li><li><a href="#">/api/blackout/date/:date</a><ul class='methods'><li data-type='method'><a href="module-blackoutRESTAPI.html#~getBlackoutByDate">POST</a></li></ul></li><li><a href="#">/api/blackout/user/:userId</a><ul class='methods'><li data-type='method'><a href="module-blackoutRESTAPI.html#~getBlackoutByUserId">POST</a></li></ul></li><li><a href="#">/api/blackout/user/:userId/date/:date</a><ul class='methods'><li data-type='method'><a href="module-blackoutRESTAPI.html#~getBlackoutByUserIdAndDate">POST</a></li></ul></li><li><a href="#">/api/import/accounts</a><ul class='methods'><li data-type='method'><a href="module-api_import.html#~importJsonAccounts">POST</a></li></ul></li><li><a href="#">/api/import/accounts/:bulkID/activate</a><ul class='methods'><li data-type='method'><a href="module-api_import.html#~activate">POST</a></li></ul></li><li><a href="#">/api/import/accounts/:bulkID/rollback</a><ul class='methods'><li data-type='method'><a href="module-api_import.html#~rollback">DELETE</a></li></ul></li><li><a href="#">/api/import/log</a><ul class='methods'><li data-type='method'><a href="module-api_import.html#~searchBulkImport">GET</a></li></ul></li><li><a href="#">/api/media/avatar/:id/:size.svg</a><ul class='methods'><li data-type='method'><a href="module-mediaRESTAPI.html#~getIdenticon">GET</a></li></ul></li><li><a href="#">/api/media/background/:id.svg</a><ul class='methods'><li data-type='method'><a href="module-mediaRESTAPI.html#~generateBackdrop">GET</a></li></ul></li><li><a href="#">/api/passes/</a><ul class='methods'><li data-type='method'><a href="module-api_passes.html#~getPasses">GET</a></li></ul></li><li><a href="#">/api/passes/:passID/state</a><ul class='methods'><li data-type='method'><a href="module-api_passes.html#~getPassState">GET</a></li><li data-type='method'><a href="module-api_passes.html#~updatePassState">PATCH</a></li></ul></li><li><a href="#">/api/passes/:passID/state/undo</a><ul class='methods'><li data-type='method'><a href="module-api_passes.html#~undoPassState">PATCH</a></li></ul></li><li><a href="#">/api/passes/me/</a><ul class='methods'><li data-type='method'><a href="module-api_passes.html#~newPassForMe">POST</a></li></ul></li><li><a href="#">/api/security/key/:type</a><ul class='methods'><li data-type='method'><a href="module-securityRESTAPI.html#~getPermissionKeyData">GET</a></li></ul></li><li><a href="#">/api/security/key/API/</a><ul class='methods'><li data-type='method'><a href="module-securityRESTAPI.html#~handleNewApiKey">POST</a></li></ul></li><li><a href="#">/api/security/key/NEW_ACCOUNT/</a><ul class='methods'><li data-type='method'><a href="module-securityRESTAPI.html#~handleCreatePermissionKey">POST</a></li></ul></li><li><a href="#">/api/server/config/passGroup/</a><ul class='methods'><li data-type='method'><a href="module-apiRoute.html#~handleGetAccountsByName">GET</a></li></ul></li><li><a href="#">/api/server/config/schedule/</a><ul class='methods'><li data-type='method'><a href="module-apiRoute.html#~getScheduleConstants">GET</a></li></ul></li><li><a href="#">/api/server/config/userGroups/</a><ul class='methods'><li data-type='method'><a href="module-apiRoute.html#~getUserGroups">GET</a></li></ul></li></ul><h3>Events</h3><ul><li><a href="global.html#event:error">error</a></li></ul><h3>Modules</h3><ul><li><a href="module-api_account_user.html">api/account/user</a><ul class='methods'><li data-type='method'><a href="module-api_account_user.html#~getUserPasses">getUserPasses</a></li><li data-type='method'><a href="module-api_account_user.html#~sendActivationEmail">sendActivationEmail</a></li></ul></li><li><a href="module-api_accounts.html">api/accounts</a><ul class='methods'><li data-type='method'><a href="module-api_accounts.html#~getAccountsByEmail">getAccountsByEmail</a></li><li data-type='method'><a href="module-api_accounts.html#~getAccountsWithClasses">getAccountsWithClasses</a></li><li data-type='method'><a href="module-api_accounts.html#~getCurrentLocation">getCurrentLocation</a></li><li data-type='method'><a href="module-api_accounts.html#~handleGetAccountsById">handleGetAccountsById</a></li><li data-type='method'><a href="module-api_accounts.html#~handleGetAccountsByName">handleGetAccountsByName</a></li><li data-type='method'><a href="module-api_accounts.html#~handleGetAccountsByNameAndUserGroup">handleGetAccountsByNameAndUserGroup</a></li><li data-type='method'><a href="module-api_accounts.html#~handleGetAccountsByUserGroup">handleGetAccountsByUserGroup</a></li><li data-type='method'><a href="module-api_accounts.html#~handleNewAccount">handleNewAccount</a></li><li data-type='method'><a href="module-api_accounts.html#~handleUpdateAccountGroupFieldsByUser">handleUpdateAccountGroupFieldsByUser</a></li><li data-type='method'><a href="module-api_accounts.html#~searchAccounts">searchAccounts</a></li><li data-type='method'><a href="module-api_accounts.html#~updateUserPassword">updateUserPassword</a></li></ul></li><li><a href="module-api_import.html">api/import</a><ul class='methods'><li data-type='method'><a href="module-api_import.html#~activate">activate</a></li><li data-type='method'><a href="module-api_import.html#~importJsonAccounts">importJsonAccounts</a></li><li data-type='method'><a href="module-api_import.html#~rollback">rollback</a></li><li data-type='method'><a href="module-api_import.html#~searchBulkImport">searchBulkImport</a></li></ul></li><li><a href="module-api_passes.html">api/passes</a><ul class='methods'><li data-type='method'><a href="module-api_passes.html#~getPasses">getPasses</a></li><li data-type='method'><a href="module-api_passes.html#~getPassState">getPassState</a></li><li data-type='method'><a href="module-api_passes.html#~newPassForMe">newPassForMe</a></li><li data-type='method'><a href="module-api_passes.html#~undoPassState">undoPassState</a></li><li data-type='method'><a href="module-api_passes.html#~updatePassState">updatePassState</a></li></ul></li><li><a href="module-api_userSchedule.html">api/userSchedule</a><ul class='methods'><li data-type='method'><a href="module-api_userSchedule.html#~getAllSchedules">getAllSchedules</a></li><li data-type='method'><a href="module-api_userSchedule.html#~getSchedulesForStudentDash">getSchedulesForStudentDash</a></li><li data-type='method'><a href="module-api_userSchedule.html#~getSchedulesForTeacherDash">getSchedulesForTeacherDash</a></li><li data-type='method'><a href="module-api_userSchedule.html#~setUserSchedule">setUserSchedule</a></li><li data-type='method'><a href="module-api_userSchedule.html#~updateUserSchedule">updateUserSchedule</a></li><li data-type='method'><a href="module-api_userSchedule.html#~updateUserSchedule">updateUserSchedule</a></li></ul></li><li><a href="module-apiRoute.html">apiRoute</a><ul class='methods'><li data-type='method'><a href="module-apiRoute.html#~getScheduleConstants">getScheduleConstants</a></li><li data-type='method'><a href="module-apiRoute.html#~getUserGroups">getUserGroups</a></li><li data-type='method'><a href="module-apiRoute.html#~handleAuthLogin">handleAuthLogin</a></li><li data-type='method'><a href="module-apiRoute.html#~handleGetAccountsByName">handleGetAccountsByName</a></li></ul></li><li><a href="module-authRESTAPI.html">authRESTAPI</a><ul class='methods'><li data-type='method'><a href="module-authRESTAPI.html#~handleAuthLogin">handleAuthLogin</a></li><li data-type='method'><a href="module-authRESTAPI.html#~loginDSCM">loginDSCM</a></li></ul></li><li><a href="module-blackoutAPI.html">blackoutAPI</a></li><li><a href="module-blackoutRESTAPI.html">blackoutRESTAPI</a><ul class='methods'><li data-type='method'><a href="module-blackoutRESTAPI.html#~getBlackoutByDate">getBlackoutByDate</a></li><li data-type='method'><a href="module-blackoutRESTAPI.html#~getBlackoutByUserId">getBlackoutByUserId</a></li><li data-type='method'><a href="module-blackoutRESTAPI.html#~getBlackoutByUserIdAndDate">getBlackoutByUserIdAndDate</a></li><li data-type='method'><a href="module-blackoutRESTAPI.html#~newBlackout">newBlackout</a></li></ul></li><li><a href="module-js_accounts.html">js/accounts</a><ul class='methods'><li data-type='method'><a href="module-js_accounts.html#.get">get</a></li><li data-type='method'><a href="module-js_accounts.html#.newUserSchedule">newUserSchedule</a></li><li data-type='method'><a href="module-js_accounts.html#.replaceUserSchedule">replaceUserSchedule</a></li><li data-type='method'><a href="module-js_accounts.html#.sendActivation">sendActivation</a></li><li data-type='method'><a href="module-js_accounts.html#.updateUserSchedule">updateUserSchedule</a></li><li data-type='method'><a href="module-js_accounts.html#~changePassword">changePassword</a></li><li data-type='method'><a href="module-js_accounts.html#~createAccount">createAccount</a></li><li data-type='method'><a href="module-js_accounts.html#~getAccountByEmail">getAccountByEmail</a></li><li data-type='method'><a href="module-js_accounts.html#~getSpecificPeriods">getSpecificPeriods</a></li><li data-type='method'><a href="module-js_accounts.html#~getStudentSchedule">getStudentSchedule</a></li><li data-type='method'><a href="module-js_accounts.html#~getTeacherSchedule">getTeacherSchedule</a></li><li data-type='method'><a href="module-js_accounts.html#~getUserByID">getUserByID</a></li><li data-type='method'><a href="module-js_accounts.html#~getUserGroupAccountByName">getUserGroupAccountByName</a></li><li data-type='method'><a href="module-js_accounts.html#~getUserGroupAccountByUserGroup">getUserGroupAccountByUserGroup</a></li><li data-type='method'><a href="module-js_accounts.html#~setVerification">setVerification</a></li><li data-type='method'><a href="module-js_accounts.html#~updateAccountGroupFieldsByID">updateAccountGroupFieldsByID</a></li><li data-type='method'><a href="module-js_accounts.html#~updatePassword">updatePassword</a></li><li data-type='method'><a href="module-js_accounts.html#~updateTags">updateTags</a></li><li data-type='method'><a href="module-js_accounts.html#~verifyPassword">verifyPassword</a></li></ul></li><li><a href="module-js_email.html">js/email</a><ul class='methods'><li data-type='method'><a href="module-js_email.html#~sendActivationEmail">sendActivationEmail</a></li><li data-type='method'><a href="module-js_email.html#~sendMail">sendMail</a></li><li data-type='method'><a href="module-js_email.html#~sendResetPasswordEmail">sendResetPasswordEmail</a></li></ul></li><li><a href="module-js_emailTemplates.html">js/emailTemplates</a></li><li><a href="module-js_import.html">js/import</a><ul class='methods'><li data-type='method'><a href="module-js_import.html#.accounts.json">accounts.json</a></li><li data-type='method'><a href="module-js_import.html#.accounts.rollback">accounts.rollback</a></li><li data-type='method'><a href="module-js_import.html#.accounts.sendActivation">accounts.sendActivation</a></li><li data-type='method'><a href="module-js_import.html#.searchBulkLogs">searchBulkLogs</a></li><li data-type='method'><a href="module-js_import.html#~deleteBulkLog">deleteBulkLog</a></li><li data-type='method'><a href="module-js_import.html#~importAccountsExcel">importAccountsExcel</a></li><li data-type='method'><a href="module-js_import.html#~mapAccounts">mapAccounts</a></li><li data-type='method'><a href="module-js_import.html#~newBulkLog">newBulkLog</a></li><li data-type='method'><a href="module-js_import.html#~updateBulkLog">updateBulkLog</a></li></ul></li><li><a href="module-js_passes.html">js/passes</a><ul class='methods'><li data-type='method'><a href="module-js_passes.html#.get">get</a></li><li data-type='method'><a href="module-js_passes.html#.getPass">getPass</a></li><li data-type='method'><a href="module-js_passes.html#.limitTally">limitTally</a></li><li data-type='method'><a href="module-js_passes.html#.newPass">newPass</a></li><li data-type='method'><a href="module-js_passes.html#.state.accepted">state.accepted</a></li><li data-type='method'><a href="module-js_passes.html#.state.allowedChanges">state.allowedChanges</a></li><li data-type='method'><a href="module-js_passes.html#.state.arrived">state.arrived</a></li><li data-type='method'><a href="module-js_passes.html#.state.canceled">state.canceled</a></li><li data-type='method'><a href="module-js_passes.html#.state.enroute">state.enroute</a></li><li data-type='method'><a href="module-js_passes.html#.state.isAccepted">state.isAccepted</a></li><li data-type='method'><a href="module-js_passes.html#.state.isCanceled">state.isCanceled</a></li><li data-type='method'><a href="module-js_passes.html#.state.isNeutral">state.isNeutral</a></li><li data-type='method'><a href="module-js_passes.html#.state.neutral">state.neutral</a></li><li data-type='method'><a href="module-js_passes.html#.state.set">state.set</a></li><li data-type='method'><a href="module-js_passes.html#.state.undo">state.undo</a></li><li data-type='method'><a href="module-js_passes.html#.updatePass">updatePass</a></li></ul></li><li><a href="module-js_schedules.html">js/schedules</a><ul class='methods'><li data-type='method'><a href="module-js_schedules.html#.on">on</a></li><li data-type='method'><a href="module-js_schedules.html#~getActivePeriodsAtDateTime">getActivePeriodsAtDateTime</a></li></ul></li><li><a href="module-js_security.html">js/security</a><ul class='methods'><li data-type='method'><a href="module-js_security.html#.checkPermissionKey">checkPermissionKey</a></li><li data-type='method'><a href="module-js_security.html#.checkPermissionKeyValidity">checkPermissionKeyValidity</a></li><li data-type='method'><a href="module-js_security.html#.cleanDB">cleanDB</a></li><li data-type='method'><a href="module-js_security.html#.createPermissionKey">createPermissionKey</a></li><li data-type='method'><a href="module-js_security.html#.getPermissionKeyData">getPermissionKeyData</a></li><li data-type='method'><a href="module-js_security.html#.keyUsed">keyUsed</a></li><li data-type='method'><a href="module-js_security.html#.newKey.activateAccount">newKey.activateAccount</a></li><li data-type='method'><a href="module-js_security.html#.newKey.newAccount">newKey.newAccount</a></li><li data-type='method'><a href="module-js_security.html#.newKey.resetPassword">newKey.resetPassword</a></li></ul></li><li><a href="module-js_userSchedule.html">js/userSchedule</a><ul class='methods'><li data-type='method'><a href="module-js_userSchedule.html#.get">get</a></li><li data-type='method'><a href="module-js_userSchedule.html#.getStudentSchedule">getStudentSchedule</a></li><li data-type='method'><a href="module-js_userSchedule.html#.getTeacherSchedule">getTeacherSchedule</a></li><li data-type='method'><a href="module-js_userSchedule.html#.new">new</a></li><li data-type='method'><a href="module-js_userSchedule.html#.replace">replace</a></li><li data-type='method'><a href="module-js_userSchedule.html#.update">update</a></li></ul></li><li><a href="module-js_utils.html">js/utils</a><ul class='methods'><li data-type='method'><a href="module-js_utils.html#.checkDashboards">checkDashboards</a></li><li data-type='method'><a href="module-js_utils.html#.compileDashboardNav">compileDashboardNav</a></li><li data-type='method'><a href="module-js_utils.html#.dashboardPermission">dashboardPermission</a></li><li data-type='method'><a href="module-js_utils.html#.getAllowedDashboards">getAllowedDashboards</a></li><li data-type='method'><a href="module-js_utils.html#.urlQuery">urlQuery</a></li><li data-type='method'><a href="module-js_utils.html#~checkPasswordPolicy">checkPasswordPolicy</a></li><li data-type='method'><a href="module-js_utils.html#~checkPeriod">checkPeriod</a></li><li data-type='method'><a href="module-js_utils.html#~cleanUser">cleanUser</a></li><li data-type='method'><a href="module-js_utils.html#~dscm">dscm</a></li><li data-type='method'><a href="module-js_utils.html#~generateSecureKey">generateSecureKey</a></li><li data-type='method'><a href="module-js_utils.html#~getBrowserSupport">getBrowserSupport</a></li></ul></li><li><a href="module-js_utils_rateLimit.html">js/utils/rateLimit</a><ul class='methods'><li data-type='method'><a href="module-js_utils_rateLimit.html#~emailPasswordResetBruteforce">emailPasswordResetBruteforce</a></li><li data-type='method'><a href="module-js_utils_rateLimit.html#~emailPasswordResetBruteforce">emailPasswordResetBruteforce</a></li><li data-type='method'><a href="module-js_utils_rateLimit.html#~emailPasswordResetBruteforce">emailPasswordResetBruteforce</a></li><li data-type='method'><a href="module-js_utils_rateLimit.html#~emailPasswordResetBruteforce">emailPasswordResetBruteforce</a></li><li data-type='method'><a href="module-js_utils_rateLimit.html#~loginBruteforce">loginBruteforce</a></li><li data-type='method'><a href="module-js_utils_rateLimit.html#~loginBruteforce">loginBruteforce</a></li></ul></li><li><a href="module-mediaRESTAPI.html">mediaRESTAPI</a><ul class='methods'><li data-type='method'><a href="module-mediaRESTAPI.html#~generateBackdrop">generateBackdrop</a></li><li data-type='method'><a href="module-mediaRESTAPI.html#~getIdenticon">getIdenticon</a></li></ul></li><li><a href="module-miscRESTApi.html">miscRESTApi</a></li><li><a href="module-passportApi.html">passportApi</a><ul class='methods'><li data-type='method'><a href="module-passportApi.html#~getPassGroups">getPassGroups</a></li><li data-type='method'><a href="module-passportApi.html#~getScheduleDefinition">getScheduleDefinition</a></li><li data-type='method'><a href="module-passportApi.html#~getScheduleOfADate">getScheduleOfADate</a></li><li data-type='method'><a href="module-passportApi.html#~newScheduleDefinition">newScheduleDefinition</a></li><li data-type='method'><a href="module-passportApi.html#~scheduleRepeatingScheduleDefinition">scheduleRepeatingScheduleDefinition</a></li><li data-type='method'><a href="module-passportApi.html#~scheduleSingleScheduleDefinition">scheduleSingleScheduleDefinition</a></li></ul></li><li><a href="module-passportAuthApi.html">passportAuthApi</a><ul class='methods'><li data-type='method'><a href="module-passportAuthApi.html#~newJWT">newJWT</a></li><li data-type='method'><a href="module-passportAuthApi.html#~newJWTForCookies">newJWTForCookies</a></li></ul></li><li><a href="module-securityRESTAPI.html">securityRESTAPI</a><ul class='methods'><li data-type='method'><a href="module-securityRESTAPI.html#~getPermissionKeyData">getPermissionKeyData</a></li><li data-type='method'><a href="module-securityRESTAPI.html#~handleCreatePermissionKey">handleCreatePermissionKey</a></li><li data-type='method'><a href="module-securityRESTAPI.html#~handleNewApiKey">handleNewApiKey</a></li></ul></li><li><a href="module-webpack_api_accounts.html">webpack/api/accounts</a><ul class='methods'><li data-type='method'><a href="module-webpack_api_accounts.html#.get">get</a></li><li data-type='method'><a href="module-webpack_api_accounts.html#.getPasses">getPasses</a></li><li data-type='method'><a href="module-webpack_api_accounts.html#.getWithClasses">getWithClasses</a></li></ul></li><li><a href="module-webpack_api_import.html">webpack/api/import</a><ul class='methods'><li data-type='method'><a href="module-webpack_api_import.html#.accounts">accounts</a></li><li data-type='method'><a href="module-webpack_api_import.html#.bulkSendActivateAccounts">bulkSendActivateAccounts</a></li><li data-type='method'><a href="module-webpack_api_import.html#.searchBulkLogs">searchBulkLogs</a></li></ul></li><li><a href="module-webpack_api_misc.html">webpack/api/misc</a><ul class='methods'><li data-type='method'><a href="module-webpack_api_misc.html#.getScheduleConfig">getScheduleConfig</a></li><li data-type='method'><a href="module-webpack_api_misc.html#.getUserGroups">getUserGroups</a></li></ul></li><li><a href="module-webpack_api_passes.html">webpack/api/passes</a><ul class='methods'><li data-type='method'><a href="module-webpack_api_passes.html#.get">get</a></li><li data-type='method'><a href="module-webpack_api_passes.html#.getState">getState</a></li><li data-type='method'><a href="module-webpack_api_passes.html#.setState">setState</a></li><li data-type='method'><a href="module-webpack_api_passes.html#.undoState">undoState</a></li></ul></li><li><a href="module-webpack_api_schedule.html">webpack/api/schedule</a><ul class='methods'><li data-type='method'><a href="module-webpack_api_schedule.html#.getSchedules">getSchedules</a></li><li data-type='method'><a href="module-webpack_api_schedule.html#.newSchedule">newSchedule</a></li><li data-type='method'><a href="module-webpack_api_schedule.html#.replaceSchedule">replaceSchedule</a></li><li data-type='method'><a href="module-webpack_api_schedule.html#.updateSchedule">updateSchedule</a></li></ul></li><li><a href="module-webpack_api_security.html">webpack/api/security</a><ul class='methods'><li data-type='method'><a href="module-webpack_api_security.html#.newAccount">newAccount</a></li></ul></li><li><a href="module-webpack_buttonLoader.html">webpack/buttonLoader</a><ul class='methods'><li data-type='method'><a href="module-webpack_buttonLoader.html#.done">done</a></li><li data-type='method'><a href="module-webpack_buttonLoader.html#.fail">fail</a></li><li data-type='method'><a href="module-webpack_buttonLoader.html#.load">load</a></li><li data-type='method'><a href="module-webpack_buttonLoader.html#.success">success</a></li><li data-type='method'><a href="module-webpack_buttonLoader.html#.warning">warning</a></li></ul></li><li><a href="module-webpack_unsavedWork.html">webpack/unsavedWork</a><ul class='methods'><li data-type='method'><a href="module-webpack_unsavedWork.html#.button">button</a></li><li data-type='method'><a href="module-webpack_unsavedWork.html#.changed">changed</a></li><li data-type='method'><a href="module-webpack_unsavedWork.html#.destroy">destroy</a></li><li data-type='method'><a href="module-webpack_unsavedWork.html#.reset">reset</a></li><li data-type='method'><a href="module-webpack_unsavedWork.html#.saved">saved</a></li></ul></li><li><a href="module-webpack_utils.html">webpack/utils</a><ul class='methods'><li data-type='method'><a href="module-webpack_utils.html#.capitalizeFirstLetter">capitalizeFirstLetter</a></li><li data-type='method'><a href="module-webpack_utils.html#.closePage">closePage</a></li><li data-type='method'><a href="module-webpack_utils.html#.distinctKeys">distinctKeys</a></li><li data-type='method'><a href="module-webpack_utils.html#.fetch">fetch</a></li><li data-type='method'><a href="module-webpack_utils.html#.fetchJSON">fetchJSON</a></li><li data-type='method'><a href="module-webpack_utils.html#.fetchStatus">fetchStatus</a></li><li data-type='method'><a href="module-webpack_utils.html#.formatJSON">formatJSON</a></li><li data-type='method'><a href="module-webpack_utils.html#.getCookie">getCookie</a></li><li data-type='method'><a href="module-webpack_utils.html#.loader">loader</a></li><li data-type='method'><a href="module-webpack_utils.html#.materialResponse">materialResponse</a></li><li data-type='method'><a href="module-webpack_utils.html#.openPage">openPage</a></li><li data-type='method'><a href="module-webpack_utils.html#.setCookie">setCookie</a></li><li data-type='method'><a href="module-webpack_utils.html#.thisUser">thisUser</a></li><li data-type='method'><a href="module-webpack_utils.html#.throwError">throwError</a></li><li data-type='method'><a href="module-webpack_utils.html#.urlQuery">urlQuery</a></li><li data-type='method'><a href="module-webpack_utils.html#.uuidv4">uuidv4</a></li></ul></li></ul><h3>Classes</h3><ul><li><a href="Caret.html">Caret</a><ul class='methods'><li data-type='method'><a href="Caret.html#destroy">destroy</a></li><li data-type='method'><a href="Caret.html#initialize">initialize</a></li><li data-type='method'><a href="Caret.html#toggle">toggle</a></li></ul></li><li><a href="Logger.html">Logger</a><ul class='methods'><li data-type='method'><a href="Logger.html#debug">debug</a></li><li data-type='method'><a href="Logger.html#done">done</a></li><li data-type='method'><a href="Logger.html#error">error</a></li><li data-type='method'><a href="Logger.html#fetchError">fetchError</a></li><li data-type='method'><a href="Logger.html#log">log</a></li><li data-type='method'><a href="Logger.html#warn">warn</a></li><li data-type='method'><a href="Logger.html#working">working</a></li></ul></li><li><a href="PassportPass.html">PassportPass</a></li><li><a href="PassportPassList.html">PassportPassList</a><ul class='methods'><li data-type='method'><a href="PassportPassList.html#_filtersChanged">_filtersChanged</a></li><li data-type='method'><a href="PassportPassList.html#refreshPasses">refreshPasses</a></li><li data-type='method'><a href="PassportPassList.html#sort">sort</a></li></ul></li><li><a href="PassportPassStateBadge.html">PassportPassStateBadge</a><ul class='methods'><li data-type='method'><a href="PassportPassStateBadge.html#stateColor">stateColor</a></li></ul></li><li><a href="PassportPassStateButtons.html">PassportPassStateButtons</a><ul class='methods'><li data-type='method'><a href="PassportPassStateButtons.html#updateState">updateState</a></li></ul></li><li><a href="PassportResponsiveDialog.html">PassportResponsiveDialog</a></li><li><a href="PassportSearchAccounts.html">PassportSearchAccounts</a><ul class='methods'><li data-type='method'><a href="PassportSearchAccounts.html#invalidQuery">invalidQuery</a></li><li data-type='method'><a href="PassportSearchAccounts.html#queryFn">queryFn</a></li><li data-type='method'><a href="PassportSearchAccounts.html#resetQuery">resetQuery</a></li></ul></li><li><a href="StudentScheduleEditor.html">StudentScheduleEditor</a><ul class='methods'><li data-type='method'><a href="StudentScheduleEditor.html#checkValidity">checkValidity</a></li><li data-type='method'><a href="StudentScheduleEditor.html#generate">generate</a></li><li data-type='method'><a href="StudentScheduleEditor.html#getHasChanged">getHasChanged</a></li><li data-type='method'><a href="StudentScheduleEditor.html#submit">submit</a></li></ul></li><li><a href="Table.html">Table</a></li><li><a href="TeacherScheduleEditor.html">TeacherScheduleEditor</a><ul class='methods'><li data-type='method'><a href="TeacherScheduleEditor.html#checkValidity">checkValidity</a></li><li data-type='method'><a href="TeacherScheduleEditor.html#generate">generate</a></li><li data-type='method'><a href="TeacherScheduleEditor.html#getHasChanged">getHasChanged</a></li><li data-type='method'><a href="TeacherScheduleEditor.html#submit">submit</a></li></ul></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">modules/webpack/utils/index.js</h1>
    

    <!--container.tmpl-->




    <!--source.tmpl-->

    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/*

Passport-Live is a modern web app for schools that helps them manage passes.
    Copyright (C) 2017  Joseph Hassell

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU Affero General Public License as published
    by the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU Affero General Public License for more details.

    You should have received a copy of the GNU Affero General Public License
    along with this program.  If not, see &lt;http://www.gnu.org/licenses/>.

email: hi@josephhassell.com

*/
/**
* Browser Utilities.
* @module webpack/utils
*/

/**
* Takes an Object and returns a URL Query string
* @link module:webpack/utils
* @param {Object} params
* @returns {String}
*/
exports.urlQuery = (params) => {
    return query = Object.keys(params)
        .filter(function(e) { return ((params[e] !== undefined) &amp;&amp; params[e] !== null); }) //removes 
        .map(k => encodeURIComponent(k) + "=" + encodeURIComponent(params[k]))
        .join("&amp;");
};

/**
* Parses an error, and triggers a toast 
* @link module:webpack/utils
* @param {Error} err
* @returns {undefined}
*/
exports.throwError = (err) => {
    //Do more Later
    if(err.isFetch) {
        var $toastHTML = $("&lt;span> ERROR: " + err.response.status + " " + err.message + "&lt;/span>").append($("&lt;br/> &lt;span> &lt;strong>" + decodeURIComponent(err.response.headers.get("errormessage")) + "&lt;/strong> &lt;/span>"));
    } else if(err.status) {
    //AJAX ERROR
        var $toastHTML = $("&lt;span> ERROR: " + err.status + " " + err.statusText + "&lt;/span>").append($("&lt;br/> &lt;span> &lt;strong>" + decodeURIComponent(err.getResponseHeader("errormessage")) + "&lt;/strong> &lt;/span>"));
    } else if(err.message) {
        var $toastHTML = $("&lt;span> ERROR: " + err.message + "&lt;/span>");
    } else {
        var $toastHTML = $("&lt;span> ERROR! Check The Console For More Details.&lt;/span>");
    }
    Materialize.toast($toastHTML, 4000);
    console.error(err);
    if(err.isFetch) {
        console.error(decodeURIComponent(err.response.headers.get("errormessage")));
    }
};

/**
* An wrapper for the fetch api to make code clean   
* @link module:webpack/utils
* @param {String} method - GET, POST, PATCH, PUT, DELETE, ect.
* @param {String} url - Url to send request to.
* @param {(Object|undefined)} data
* @param {(Object|undefined)} data.query - JSON key pair to add to the URL as a query
* @param {(Object|undefined)} data.body - Data to send in the body of the request.  May not work with GET and DELETE
* @param {(Boolean|undefined)} data.head - Data to be sent as the header. Json object
* @param {(Boolean|undefined)} data.auth - If true, it will send the XSRF-TOKEN to the server
* @returns {Promise}
*/
exports.fetch = (method, url, data) => {
    return new Promise((resolve, reject) => {
        if(!data) {data = {};}
        if(data.query) {data.query = "?" + exports.urlQuery(data.query);} else {data.query = "";}
        if(!data.head) {data.head = {};}
        if(data.auth) {data.head["x-xsrf-token"] = exports.getCookie("XSRF-TOKEN");}
        if(data.body &amp;&amp; typeof data.body === "object") {
            data.head["Content-Type"] = "application/json";
            data.body = JSON.stringify(data.body);
        }
        fetch(url + data.query, {
            method: method,
            headers: new Headers(data.head),
            body: data.body,
            credentials: "same-origin"
        }).then(exports.fetchStatus).then(exports.fetchJSON).then((json) => {
            return resolve(json);
        }).catch((err) => {
            return reject(err);
        });
    });
};

/**
* Parses a fetch response and either throws an error, or it returns a promise  
* @link module:webpack/utils
* @param {Response} response
* @returns {Promise}
*/
exports.fetchStatus = (response) => {
    //console.log(response)
    if (response.status >= 200 &amp;&amp; response.status &lt; 300) {
        return response;
    } else {
        var error = new Error(response.statusText);
        error.isFetch = true;
        error.response = response;
        //exports.throwError(error)
        throw error;
    }
};

/**
* Converts response to json   
* @link module:webpack/utils
* @param {Response} response
* @returns {Promise}
*/
exports.fetchJSON = (response) => {
    return response.text().then(function(text) {
        return text ? JSON.parse(text) : {};
    });
};

/**
* Creates a UUID V4 Id    
* @link module:webpack/utils
* @returns {String}
*/
exports.uuidv4 = () => {
    return ([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g, c => 
        (c ^ crypto.getRandomValues(new Uint8Array(1))[0] &amp; 15 >> c / 4).toString(16)
    );
};

/**
* Sets a browser cookie   
* @link module:webpack/utils
* @param {String} cname - Value to name the cookie
* @param {String} cvalue - Value of the cookie
* @param {Number} exdays - Days until expired
* @returns {undefined}
*/
exports.setCookie = (cname, cvalue, exdays) => {
    var d = new Date();
    d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));
    var expires = "expires="+d.toUTCString();
    document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
};

/**
* Gets a browser cookie   
* @link module:webpack/utils
* @param {String} cname - Name of the cookie
* @returns {String}
*/
exports.getCookie = (name) => {
    /*var name = cname + "=";
    var ca = document.cookie.split(';');
    for(var i = 0; i &lt; ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0) == ' ') {
            c = c.substring(1);
        }
        if (c.indexOf(name) == 0) {
            return c.substring(name.length, c.length);
        }
    }
    return "";*/
    var value = "; " + document.cookie;
    var parts = value.split("; " + name + "=");
    if (parts.length == 2) return parts.pop().split(";").shift();

};

/**
* Returns a list of every distinct key in the object   
* @link module:webpack/utils
* @param {Object[]} arr - Array of the json objects with keys to test
* @returns {String[]}
*/
exports.distinctKeys = (arr) => {
    return Object.keys(arr.reduce(function(result, obj) {
        return Object.assign(result, obj);
    }, {}));
};

/**
* Returns the current user's ID 
* @link module:webpack/utils
* @returns {String}
*/
exports.thisUser = () => {
    return exports.getCookie("ACCOUNT-ID");
};

/**
* Material full screen response for major actions
* @link module:webpack/utils
* @param {string} icon - Can be "check" or "cancel"
* @param {string} colorClass - Either a css class to apply to the background or presets: "success" "error" or "warning"
* @returns {function} done
*/
exports.materialResponse = (icon, colorClass, done) => {
    switch(colorClass){
    case "success": 
        colorClass = "green accent-3";
        break;
    case "error": 
        colorClass = "red accent-4";
        break;
    case "warning": 
        colorClass = "orange accent-4";
        break;
    }

    //Set the elements 
    $("body").prepend("&lt;div id=\"circleThingContainer\" class=\"circleThingContainer\">&lt;div id=\"circleThing\" class=\"circleThing\">&lt;/div>&lt;/div>&lt;span id=\"Xleft\">&lt;/span>&lt;span id=\"Xright\">&lt;/span>&lt;div id=\"checkmarkContainer\">&lt;span id=\"Cleft\">&lt;/span>&lt;span id=\"Cright\">&lt;/span>&lt;/div>");
    //setup green grow
    if(icon == "check") {
        $("#checkmarkContainer").addClass("checkmarkContainer checkmarkContainerIn");
        //Check marks 
        $("#Cleft").addClass("Cleft CleftIn");
        $("#Cright").addClass("Cright CrightIn");
    }
    if(icon == "cancel") {
        //X marks 
        $("#Xleft").addClass("Xleft XleftIn");
        $("#Xright").addClass("Xright XrightIn");
    }

    $("#circleThing").removeClass().addClass("circleThing circleGrow");
    //addcolor
    $("#circleThing").addClass(colorClass);

    //on circle complete 
    $("#circleThing").one("webkitAnimationEnd oanimationend msAnimationEnd animationend", function(e) {
      
        $("#circleThingContainer").addClass(colorClass);
        $("#circleThing").removeClass().addClass("circleThing");
        //wait for 1 second
        setTimeout(function() {
            if(icon == "check") {
                $("#checkmarkContainer").removeClass("checkmarkContainerIn").addClass("checkmarkContainerOut");
                $("#Cleft").removeClass("CleftIn").addClass("CleftOut");
                $("#Cright").removeClass("CrightIn").addClass("CrightOut");
            }
            if(icon == "cancel") {
            //X marks 
                $("#Xleft").removeClass("XleftIn").addClass("XLeftOut");
                $("#Xright").removeClass("XrightIn").addClass("XrightOut");
            }

            $("#circleThing").removeClass().addClass("circleThing circleGrow grey darken-4");
            //$('#circleThing').css("background-color", "rgba(0, 0, 0, 0)")
            //when final one ends
            $("#circleThing").one("webkitAnimationEnd oanimationend msAnimationEnd animationend", function(e) {
                $("#circleThingContainer").removeClass(colorClass).addClass("grey darken-4");
                setTimeout(function() {
                    $("#Xleft").remove();
                    $("#Xright").remove();
                    $("#Cleft").remove();
                    $("#Cright").remove();
                    $("#checkmarkContainer").remove();
                    $("#circleThingContainer").fadeOut("fast", function() {
                        $("#circleThingContainer").remove();
                    });
                    $("#circleThing").remove();
                    if(typeof done == "function") {
                        return done();
                    }
                }, 500);
            });
        }, 1000);
    });
};

/** 
* Opens a mustache Mixen page
* @link module:webpack/utils
* @param {string} pageID - ID of the page element containing the mixen 
*/
exports.openPage = (pageID) => {
    $("#" + pageID).addClass("active");
};
/** 
* close a mustache Mixen page
* @link module:webpack/utils
* @param {string} pageID - ID of the page element containing the mixen 
*/
exports.closePage = (pageID) => {
    $("#" + pageID).removeClass("active");
};

/** 
* Returns a Materialize loader element
* @link module:webpack/utils
* @param {Object} [options]
* @param {string} [options.size=medium] - ("big" or "small")
* @param {string} [options.color=multi] - ("red", "yellow", "green", "blue")
* @param {boolean} [options.active=true]
* @returns {Object} - JQuery element
*/
exports.loader = ({size, color, active}) => {
    if(!size) {size = "";}
    if(active !== false) {active = "active"} else {active = ""}
    let htmlLoader = $("&lt;div/>").addClass("preloader-wrapper " + active + " " + size);
    
    
    let itt = !color?4:1;
    for(let x = 0; x &lt; itt; x++) {
        let rowCol = typeof color === "string" ? color + "-only" : x === 0? "blue" : x === 1? "red" : x === 2? "yellow" : x === 3? "green" : ""; 
        htmlLoader.append($("&lt;div class=\"spinner-layer spinner-" + rowCol + `">
      &lt;div class="circle-clipper left">
        &lt;div class="circle">&lt;/div>
      &lt;/div>&lt;div class="gap-patch">
        &lt;div class="circle">&lt;/div>
      &lt;/div>&lt;div class="circle-clipper right">
        &lt;div class="circle">&lt;/div>
      &lt;/div>
    &lt;/div>
    `));
    }
    return htmlLoader;
};


/** 
* Returns a nicely formatted json string
* use with &lt;textarea> for an nice json editor
* @link module:webpack/utils
* @param {Object} json
* @returns {String} - Json STRING
*/
exports.formatJSON = (json) => {
    let obj = JSON.parse(json);
    let pretty = JSON.stringify(obj, undefined, 4);
    return pretty;    
};

/** 
* Takes a string and capitalizes the first letter in it
* @link module:webpack/utils
* @param {String} string
* @returns {String}
*/
exports.capitalizeFirstLetter = (string) => {
    return string.charAt(0).toUpperCase() + string.slice(1).toLowerCase();
};</code></pre>
        </article>
    </section>





</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Wed May 02 2018 01:50:46 GMT+0000 (UTC) using the LOKE theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
