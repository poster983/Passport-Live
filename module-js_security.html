<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>js/security - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>

    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav class="nav">
    <h2><a href="index.html">Home</a></h2><h3>Tutorials</h3><ul><li><a href="tutorial-Configs.html">Configs</a></li><li><a href="tutorial-Setup Error Monitoring.html">Setup Error Monitoring</a></li><li><a href="tutorial-Usergroup Database Models.html">Usergroup Database Models</a></li><li><a href="tutorial-Web App System Requirements.html">Web App System Requirements</a></li></ul><h3>API</h3><ul><li><a href="#">/api/account/</a><ul class='methods'><li data-type='method'><a href="global.html#searchAccounts">GET</a></li></ul></li><li><a href="#">/api/account/email/:email/</a><ul class='methods'><li data-type='method'><a href="global.html#getAccountsByEmail">GET</a></li></ul></li><li><a href="#">/api/account/groupfields/</a><ul class='methods'><li data-type='method'><a href="global.html#handleUpdateAccountGroupFieldsByUser">PATCH</a></li></ul></li><li><a href="#">/api/account/hasClasses</a><ul class='methods'><li data-type='method'><a href="global.html#getAccountsWithClasses">GET</a></li></ul></li><li><a href="#">/api/account/id/:id</a><ul class='methods'><li data-type='method'><a href="global.html#handleGetAccountsById">GET</a></li></ul></li><li><a href="#">/api/account/incomplete/dashboard/student</a><ul class='methods'><li data-type='method'><a href="global.html#studentCheckIfIncomplete">GET</a></li></ul></li><li><a href="#">/api/account/location/datetime/:dateTime/id/:id/</a><ul class='methods'><li data-type='method'><a href="global.html#getCurrentLocation">GET</a></li></ul></li><li><a href="#">/api/account/name/:name/</a><ul class='methods'><li data-type='method'><a href="global.html#handleGetAccountsByName">GET</a></li></ul></li><li><a href="#">/api/account/new/:userGroup/</a><ul class='methods'><li data-type='method'><a href="global.html#handleNewAccount">POST</a></li></ul></li><li><a href="#">/api/account/password/</a><ul class='methods'><li data-type='method'><a href="global.html#updateUserPassword">PATCH</a></li></ul></li><li><a href="#">/api/account/schedule/:dashboard</a><ul class='methods'><li data-type='method'><a href="module-api_userSchedule.html#~setUserSchedule">POST</a></li><li data-type='method'><a href="module-api_userSchedule.html#~updateUserSchedule">PATCH</a></li><li data-type='method'><a href="module-api_userSchedule.html#~updateUserSchedule">PUT</a></li></ul></li><li><a href="#">/api/account/schedule/[:id]</a><ul class='methods'><li data-type='method'><a href="module-api_userSchedule.html#~getAllSchedules">GET</a></li></ul></li><li><a href="#">/api/account/schedule/student/:id</a><ul class='methods'><li data-type='method'><a href="module-api_userSchedule.html#~getSchedulesForStudentDash">GET</a></li></ul></li><li><a href="#">/api/account/schedule/teacher/:id</a><ul class='methods'><li data-type='method'><a href="module-api_userSchedule.html#~getSchedulesForTeacherDash">GET</a></li></ul></li><li><a href="#">/api/account/userGroup/:userGroup/</a><ul class='methods'><li data-type='method'><a href="global.html#handleGetAccountsByUserGroup">GET</a></li></ul></li><li><a href="#">/api/account/userGroup/:userGroup/name/:name/</a><ul class='methods'><li data-type='method'><a href="global.html#handleGetAccountsByNameAndUserGroup">GET</a></li></ul></li><li><a href="#">/api/auth/login/</a><ul class='methods'><li data-type='method'><a href="module-authRESTAPI.html#~handleAuthLogin">POST</a></li></ul></li><li><a href="#">/api/auth/login/dscm</a><ul class='methods'><li data-type='method'><a href="module-authRESTAPI.html#~loginDSCM">POST</a></li></ul></li><li><a href="#">/api/blackout/</a><ul class='methods'><li data-type='method'><a href="module-blackoutRESTAPI.html#~newBlackout">POST</a></li></ul></li><li><a href="#">/api/blackout/date/:date</a><ul class='methods'><li data-type='method'><a href="module-blackoutRESTAPI.html#~getBlackoutByDate">POST</a></li></ul></li><li><a href="#">/api/blackout/user/:userId</a><ul class='methods'><li data-type='method'><a href="module-blackoutRESTAPI.html#~getBlackoutByUserId">POST</a></li></ul></li><li><a href="#">/api/blackout/user/:userId/date/:date</a><ul class='methods'><li data-type='method'><a href="module-blackoutRESTAPI.html#~getBlackoutByUserIdAndDate">POST</a></li></ul></li><li><a href="#">/api/media/avatar/:id/:size.svg</a><ul class='methods'><li data-type='method'><a href="module-mediaRESTAPI.html#~getIdenticon">GET</a></li></ul></li><li><a href="#">/api/media/background/:id.svg</a><ul class='methods'><li data-type='method'><a href="module-mediaRESTAPI.html#~generateBackdrop">GET</a></li></ul></li><li><a href="#">/api/passes/me/</a><ul class='methods'><li data-type='method'><a href="module-passRESTApi.html#~newPassForMe">POST</a></li></ul></li><li><a href="#">/api/passes/me/by/:idCol/from/:fromDay/</a><ul class='methods'><li data-type='method'><a href="module-passRESTApi.html#~getPassForMeFromDay">GET</a></li></ul></li><li><a href="#">/api/passes/me/by/:idCol/from/:fromDay/to/:toDay</a><ul class='methods'><li data-type='method'><a href="module-passRESTApi.html#~getPassForMeFromToDay">GET</a></li></ul></li><li><a href="#">/api/passes/status/:passId/isMigrating/:state</a><ul class='methods'><li data-type='method'><a href="module-passRESTApi.html#~updateMigrationStatus">PATCH</a></li></ul></li><li><a href="#">/api/passes/status/:passId/state/:state</a><ul class='methods'><li data-type='method'><a href="module-passRESTApi.html#~updatePassState">PATCH</a></li></ul></li><li><a href="#">/api/security/key/:type</a><ul class='methods'><li data-type='method'><a href="module-securityRESTAPI.html#~getPermissionKeyData">GET</a></li></ul></li><li><a href="#">/api/security/key/API/</a><ul class='methods'><li data-type='method'><a href="module-securityRESTAPI.html#~handleNewApiKey">POST</a></li></ul></li><li><a href="#">/api/security/key/NEW_ACCOUNT/</a><ul class='methods'><li data-type='method'><a href="module-securityRESTAPI.html#~handleCreatePermissionKey">POST</a></li></ul></li><li><a href="#">/api/server/config/passGroup/</a><ul class='methods'><li data-type='method'><a href="module-apiRoute.html#~handleGetAccountsByName">GET</a></li></ul></li><li><a href="#">/api/server/config/schedule/</a><ul class='methods'><li data-type='method'><a href="module-apiRoute.html#~getScheduleConstants">GET</a></li></ul></li><li><a href="#">/api/server/config/userGroups/</a><ul class='methods'><li data-type='method'><a href="module-apiRoute.html#~getUserGroups">GET</a></li></ul></li></ul><h3>Modules</h3><ul><li><a href="module-api_userSchedule.html">api/userSchedule</a><ul class='methods'><li data-type='method'><a href="module-api_userSchedule.html#~getAllSchedules">getAllSchedules</a></li><li data-type='method'><a href="module-api_userSchedule.html#~getSchedulesForStudentDash">getSchedulesForStudentDash</a></li><li data-type='method'><a href="module-api_userSchedule.html#~getSchedulesForTeacherDash">getSchedulesForTeacherDash</a></li><li data-type='method'><a href="module-api_userSchedule.html#~setUserSchedule">setUserSchedule</a></li><li data-type='method'><a href="module-api_userSchedule.html#~updateUserSchedule">updateUserSchedule</a></li><li data-type='method'><a href="module-api_userSchedule.html#~updateUserSchedule">updateUserSchedule</a></li></ul></li><li><a href="module-apiRoute.html">apiRoute</a><ul class='methods'><li data-type='method'><a href="module-apiRoute.html#~getScheduleConstants">getScheduleConstants</a></li><li data-type='method'><a href="module-apiRoute.html#~getUserGroups">getUserGroups</a></li><li data-type='method'><a href="module-apiRoute.html#~handleAuthLogin">handleAuthLogin</a></li><li data-type='method'><a href="module-apiRoute.html#~handleGetAccountsByName">handleGetAccountsByName</a></li></ul></li><li><a href="module-authRESTAPI.html">authRESTAPI</a><ul class='methods'><li data-type='method'><a href="module-authRESTAPI.html#~handleAuthLogin">handleAuthLogin</a></li><li data-type='method'><a href="module-authRESTAPI.html#~loginDSCM">loginDSCM</a></li></ul></li><li><a href="module-blackoutAPI.html">blackoutAPI</a></li><li><a href="module-blackoutRESTAPI.html">blackoutRESTAPI</a><ul class='methods'><li data-type='method'><a href="module-blackoutRESTAPI.html#~getBlackoutByDate">getBlackoutByDate</a></li><li data-type='method'><a href="module-blackoutRESTAPI.html#~getBlackoutByUserId">getBlackoutByUserId</a></li><li data-type='method'><a href="module-blackoutRESTAPI.html#~getBlackoutByUserIdAndDate">getBlackoutByUserIdAndDate</a></li><li data-type='method'><a href="module-blackoutRESTAPI.html#~newBlackout">newBlackout</a></li></ul></li><li><a href="module-js_accounts.html">js/accounts</a><ul class='methods'><li data-type='method'><a href="module-js_accounts.html#.get">get</a></li><li data-type='method'><a href="module-js_accounts.html#.newUserSchedule">newUserSchedule</a></li><li data-type='method'><a href="module-js_accounts.html#.replaceUserSchedule">replaceUserSchedule</a></li><li data-type='method'><a href="module-js_accounts.html#.updateUserSchedule">updateUserSchedule</a></li><li data-type='method'><a href="module-js_accounts.html#~changePassword">changePassword</a></li><li data-type='method'><a href="module-js_accounts.html#~createAccount">createAccount</a></li><li data-type='method'><a href="module-js_accounts.html#~getAccountByEmail">getAccountByEmail</a></li><li data-type='method'><a href="module-js_accounts.html#~getSpecificPeriods">getSpecificPeriods</a></li><li data-type='method'><a href="module-js_accounts.html#~getStudentSchedule">getStudentSchedule</a></li><li data-type='method'><a href="module-js_accounts.html#~getTeacherSchedule">getTeacherSchedule</a></li><li data-type='method'><a href="module-js_accounts.html#~getUserByID">getUserByID</a></li><li data-type='method'><a href="module-js_accounts.html#~getUserGroupAccountByName">getUserGroupAccountByName</a></li><li data-type='method'><a href="module-js_accounts.html#~getUserGroupAccountByUserGroup">getUserGroupAccountByUserGroup</a></li><li data-type='method'><a href="module-js_accounts.html#~setVerification">setVerification</a></li><li data-type='method'><a href="module-js_accounts.html#~updateAccountGroupFieldsByID">updateAccountGroupFieldsByID</a></li><li data-type='method'><a href="module-js_accounts.html#~updatePassword">updatePassword</a></li><li data-type='method'><a href="module-js_accounts.html#~updateTags">updateTags</a></li><li data-type='method'><a href="module-js_accounts.html#~verifyPassword">verifyPassword</a></li></ul></li><li><a href="module-js_email.html">js/email</a><ul class='methods'><li data-type='method'><a href="module-js_email.html#~sendActivationEmail">sendActivationEmail</a></li><li data-type='method'><a href="module-js_email.html#~sendMail">sendMail</a></li><li data-type='method'><a href="module-js_email.html#~sendResetPasswordEmail">sendResetPasswordEmail</a></li></ul></li><li><a href="module-js_emailTemplates.html">js/emailTemplates</a></li><li><a href="module-js_import.html">js/import</a><ul class='methods'><li data-type='method'><a href="module-js_import.html#~deleteBulkLog">deleteBulkLog</a></li><li data-type='method'><a href="module-js_import.html#~importAccountsExcel">importAccountsExcel</a></li><li data-type='method'><a href="module-js_import.html#~mapAccounts">mapAccounts</a></li><li data-type='method'><a href="module-js_import.html#~newBulkLog">newBulkLog</a></li><li data-type='method'><a href="module-js_import.html#~updateBulkLog">updateBulkLog</a></li></ul></li><li><a href="module-js_passes.html">js/passes</a><ul class='methods'><li data-type='method'><a href="module-js_passes.html#.flexableGetPasses">flexableGetPasses</a></li><li data-type='method'><a href="module-js_passes.html#.getPass">getPass</a></li><li data-type='method'><a href="module-js_passes.html#.limitTally">limitTally</a></li><li data-type='method'><a href="module-js_passes.html#.newPass">newPass</a></li><li data-type='method'><a href="module-js_passes.html#.updatePass">updatePass</a></li></ul></li><li><a href="module-js_schedules.html">js/schedules</a><ul class='methods'><li data-type='method'><a href="module-js_schedules.html#~getActivePeriodsAtDateTime">getActivePeriodsAtDateTime</a></li></ul></li><li><a href="module-js_security.html">js/security</a><ul class='methods'><li data-type='method'><a href="module-js_security.html#.checkPermissionKey">checkPermissionKey</a></li><li data-type='method'><a href="module-js_security.html#.checkPermissionKeyValidity">checkPermissionKeyValidity</a></li><li data-type='method'><a href="module-js_security.html#.cleanDB">cleanDB</a></li><li data-type='method'><a href="module-js_security.html#.createPermissionKey">createPermissionKey</a></li><li data-type='method'><a href="module-js_security.html#.getPermissionKeyData">getPermissionKeyData</a></li><li data-type='method'><a href="module-js_security.html#.keyUsed">keyUsed</a></li><li data-type='method'><a href="module-js_security.html#.newKey.activateAccount">newKey.activateAccount</a></li><li data-type='method'><a href="module-js_security.html#.newKey.newAccount">newKey.newAccount</a></li><li data-type='method'><a href="module-js_security.html#.newKey.resetPassword">newKey.resetPassword</a></li></ul></li><li><a href="module-js_userSchedule.html">js/userSchedule</a><ul class='methods'><li data-type='method'><a href="module-js_userSchedule.html#.get">get</a></li><li data-type='method'><a href="module-js_userSchedule.html#.getStudentSchedule">getStudentSchedule</a></li><li data-type='method'><a href="module-js_userSchedule.html#.getTeacherSchedule">getTeacherSchedule</a></li><li data-type='method'><a href="module-js_userSchedule.html#.new">new</a></li><li data-type='method'><a href="module-js_userSchedule.html#.replace">replace</a></li><li data-type='method'><a href="module-js_userSchedule.html#.update">update</a></li></ul></li><li><a href="module-js_utils.html">js/utils</a><ul class='methods'><li data-type='method'><a href="module-js_utils.html#.checkPermission">checkPermission</a></li><li data-type='method'><a href="module-js_utils.html#.compileDashboardNav">compileDashboardNav</a></li><li data-type='method'><a href="module-js_utils.html#.getAllowedDashboards">getAllowedDashboards</a></li><li data-type='method'><a href="module-js_utils.html#.middlewarePermission">middlewarePermission</a></li><li data-type='method'><a href="module-js_utils.html#~checkPasswordPolicy">checkPasswordPolicy</a></li><li data-type='method'><a href="module-js_utils.html#~checkPeriod">checkPeriod</a></li><li data-type='method'><a href="module-js_utils.html#~cleanUser">cleanUser</a></li><li data-type='method'><a href="module-js_utils.html#~dscm">dscm</a></li><li data-type='method'><a href="module-js_utils.html#~generateSecureKey">generateSecureKey</a></li><li data-type='method'><a href="module-js_utils.html#~getBrowserSupport">getBrowserSupport</a></li></ul></li><li><a href="module-js_utils_rateLimit.html">js/utils/rateLimit</a><ul class='methods'><li data-type='method'><a href="module-js_utils_rateLimit.html#~emailPasswordResetBruteforce">emailPasswordResetBruteforce</a></li><li data-type='method'><a href="module-js_utils_rateLimit.html#~emailPasswordResetBruteforce">emailPasswordResetBruteforce</a></li><li data-type='method'><a href="module-js_utils_rateLimit.html#~emailPasswordResetBruteforce">emailPasswordResetBruteforce</a></li><li data-type='method'><a href="module-js_utils_rateLimit.html#~loginBruteforce">loginBruteforce</a></li><li data-type='method'><a href="module-js_utils_rateLimit.html#~loginBruteforce">loginBruteforce</a></li></ul></li><li><a href="module-mediaRESTAPI.html">mediaRESTAPI</a><ul class='methods'><li data-type='method'><a href="module-mediaRESTAPI.html#~generateBackdrop">generateBackdrop</a></li><li data-type='method'><a href="module-mediaRESTAPI.html#~getIdenticon">getIdenticon</a></li></ul></li><li><a href="module-miscRESTApi.html">miscRESTApi</a></li><li><a href="module-passportApi.html">passportApi</a><ul class='methods'><li data-type='method'><a href="module-passportApi.html#~getPassGroups">getPassGroups</a></li><li data-type='method'><a href="module-passportApi.html#~getScheduleDefinition">getScheduleDefinition</a></li><li data-type='method'><a href="module-passportApi.html#~getScheduleOfADate">getScheduleOfADate</a></li><li data-type='method'><a href="module-passportApi.html#~newScheduleDefinition">newScheduleDefinition</a></li><li data-type='method'><a href="module-passportApi.html#~scheduleRepeatingScheduleDefinition">scheduleRepeatingScheduleDefinition</a></li><li data-type='method'><a href="module-passportApi.html#~scheduleSingleScheduleDefinition">scheduleSingleScheduleDefinition</a></li></ul></li><li><a href="module-passportAuthApi.html">passportAuthApi</a><ul class='methods'><li data-type='method'><a href="module-passportAuthApi.html#~newJWT">newJWT</a></li><li data-type='method'><a href="module-passportAuthApi.html#~newJWTForCookies">newJWTForCookies</a></li></ul></li><li><a href="module-passRESTApi.html">passRESTApi</a><ul class='methods'><li data-type='method'><a href="module-passRESTApi.html#~getPassForMeFromDay">getPassForMeFromDay</a></li><li data-type='method'><a href="module-passRESTApi.html#~getPassForMeFromToDay">getPassForMeFromToDay</a></li><li data-type='method'><a href="module-passRESTApi.html#~newPassForMe">newPassForMe</a></li><li data-type='method'><a href="module-passRESTApi.html#~updateArrivedStatus">updateArrivedStatus</a></li><li data-type='method'><a href="module-passRESTApi.html#~updateMigrationStatus">updateMigrationStatus</a></li><li data-type='method'><a href="module-passRESTApi.html#~updatePassState">updatePassState</a></li></ul></li><li><a href="module-securityRESTAPI.html">securityRESTAPI</a><ul class='methods'><li data-type='method'><a href="module-securityRESTAPI.html#~getPermissionKeyData">getPermissionKeyData</a></li><li data-type='method'><a href="module-securityRESTAPI.html#~handleCreatePermissionKey">handleCreatePermissionKey</a></li><li data-type='method'><a href="module-securityRESTAPI.html#~handleNewApiKey">handleNewApiKey</a></li></ul></li><li><a href="module-webpack_api_accounts.html">webpack/api/accounts</a><ul class='methods'><li data-type='method'><a href="module-webpack_api_accounts.html#.get">get</a></li><li data-type='method'><a href="module-webpack_api_accounts.html#.getWithClasses">getWithClasses</a></li></ul></li><li><a href="module-webpack_api_import.html">webpack/api/import</a><ul class='methods'><li data-type='method'><a href="module-webpack_api_import.html#.searchBulkLogs">searchBulkLogs</a></li></ul></li><li><a href="module-webpack_api_misc.html">webpack/api/misc</a><ul class='methods'><li data-type='method'><a href="module-webpack_api_misc.html#.getScheduleConfig">getScheduleConfig</a></li></ul></li><li><a href="module-webpack_api_schedule.html">webpack/api/schedule</a><ul class='methods'><li data-type='method'><a href="module-webpack_api_schedule.html#.getSchedules">getSchedules</a></li><li data-type='method'><a href="module-webpack_api_schedule.html#.newSchedule">newSchedule</a></li><li data-type='method'><a href="module-webpack_api_schedule.html#.replaceSchedule">replaceSchedule</a></li><li data-type='method'><a href="module-webpack_api_schedule.html#.updateSchedule">updateSchedule</a></li></ul></li><li><a href="module-webpack_unsavedWork.html">webpack/unsavedWork</a><ul class='methods'><li data-type='method'><a href="module-webpack_unsavedWork.html#.button">button</a></li><li data-type='method'><a href="module-webpack_unsavedWork.html#.changed">changed</a></li><li data-type='method'><a href="module-webpack_unsavedWork.html#.destroy">destroy</a></li><li data-type='method'><a href="module-webpack_unsavedWork.html#.reset">reset</a></li><li data-type='method'><a href="module-webpack_unsavedWork.html#.saved">saved</a></li></ul></li><li><a href="module-webpack_utils.html">webpack/utils</a><ul class='methods'><li data-type='method'><a href="module-webpack_utils.html#.closePage">closePage</a></li><li data-type='method'><a href="module-webpack_utils.html#.distinctKeys">distinctKeys</a></li><li data-type='method'><a href="module-webpack_utils.html#.fetch">fetch</a></li><li data-type='method'><a href="module-webpack_utils.html#.fetchJSON">fetchJSON</a></li><li data-type='method'><a href="module-webpack_utils.html#.fetchStatus">fetchStatus</a></li><li data-type='method'><a href="module-webpack_utils.html#.getCookie">getCookie</a></li><li data-type='method'><a href="module-webpack_utils.html#.materialResponse">materialResponse</a></li><li data-type='method'><a href="module-webpack_utils.html#.openPage">openPage</a></li><li data-type='method'><a href="module-webpack_utils.html#.setCookie">setCookie</a></li><li data-type='method'><a href="module-webpack_utils.html#.thisUser">thisUser</a></li><li data-type='method'><a href="module-webpack_utils.html#.throwError">throwError</a></li><li data-type='method'><a href="module-webpack_utils.html#.urlQuery">urlQuery</a></li><li data-type='method'><a href="module-webpack_utils.html#.uuidv4">uuidv4</a></li></ul></li></ul><h3>Classes</h3><ul><li><a href="Caret.html">Caret</a></li><li><a href="StudentScheduleEditor.html">StudentScheduleEditor</a><ul class='methods'><li data-type='method'><a href="StudentScheduleEditor.html#checkValidity">checkValidity</a></li><li data-type='method'><a href="StudentScheduleEditor.html#generate">generate</a></li><li data-type='method'><a href="StudentScheduleEditor.html#getHasChanged">getHasChanged</a></li><li data-type='method'><a href="StudentScheduleEditor.html#submit">submit</a></li></ul></li><li><a href="Table.html">Table</a></li><li><a href="TeacherScheduleEditor.html">TeacherScheduleEditor</a><ul class='methods'><li data-type='method'><a href="TeacherScheduleEditor.html#checkValidity">checkValidity</a></li><li data-type='method'><a href="TeacherScheduleEditor.html#generate">generate</a></li><li data-type='method'><a href="TeacherScheduleEditor.html#getHasChanged">getHasChanged</a></li><li data-type='method'><a href="TeacherScheduleEditor.html#submit">submit</a></li></ul></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">js/security</h1>
    

    <!--container.tmpl-->





<section>



<header data-tmpl="container.tmpl">
    
      <h2>Module: js/security</h2>
        
    

    
      <div class="bs-callout bs-callout-default">
        <h5>Members</h5>
        <br />
        <dl class="dl-horizontal methods-members">
        <dt>Fields &amp; Properties</dt><dd><ul>
            <li><a href="#permissionKeyType">permissionKeyType</a></li>
            </ul></dd><dt>Methods</dt><dd><ul>
            <li><a href="#checkPermissionKey">checkPermissionKey</a></li>
            
            <li><a href="#checkPermissionKeyValidity">checkPermissionKeyValidity</a></li>
            
            <li><a href="#cleanDB">cleanDB</a></li>
            
            <li><a href="#createPermissionKey">createPermissionKey</a></li>
            
            <li><a href="#getPermissionKeyData">getPermissionKeyData</a></li>
            
            <li><a href="#keyUsed">keyUsed</a></li>
            
            <li><a href="#newKey.activateAccount">newKey.activateAccount</a></li>
            
            <li><a href="#newKey.newAccount">newKey.newAccount</a></li>
            
            <li><a href="#newKey.resetPassword">newKey.resetPassword</a></li>
            </ul></dd></dl></div>
</header>

<article>
    <div class="container-overview">
    
        

        
    
    </div>

    

    

    

     

    

    
        <h3 class="subsection-title">Members</h3>

        
            <!--members.tmpl-->
<div class="member-details">




  <!--source-link.tmpl-->


<div class="pull-right source-link-container">
  <code class="source-link" data-tmpl="method-tmpl(1)">
    <i class="fa fa-file-o"></i>
    <a href="modules_passport-api_security.js.html">security.js</a>:<a href="modules_passport-api_security.js.html#line418">418</a>
  </code>
</div>



<h4 class="name" id=".permissionKeyType">
  <span class="type-signature">(static, readonly) </span>permissionKeyType<span class="type-signature"> :String</span>
</h4>




<div class="description">
    <p>Used for ensuring the correct fields are added for each type of permission key.</p>
</div>


<div>

<!-- details.tmpl -->






    <h5 class="subsection-title">Properties:</h5>

    

<table class="props">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>NEW_ACCOUNT</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last"><p>Used For Account Creation API.  The key gives the user permission to create a protected account (I.E. userGroup with &quot;verifyAccountCreation&quot; set to true)</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>ACTIVATE_ACCOUNT</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last"><p>Used for activating an account from an email.  Used for both self signup and mass import activation with and without a password</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>RESET_PASSWORD</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last"><p>Used for resetting your password via an email.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>UNKNOWN</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="dl-horizontal">

    

    

    

    

    

    

    

    

    

    

    

    
</dl>











</div>

</div>

        
    

    
        <h3 class="subsection-title">Methods</h3>

        
            <!--method.tmpl-->
<div class="method-details">



  <!--source-link.tmpl-->


<div class="pull-right source-link-container">
  <code class="source-link" data-tmpl="method-tmpl(1)">
    <i class="fa fa-file-o"></i>
    <a href="modules_passport-api_security.js.html">security.js</a>:<a href="modules_passport-api_security.js.html#line221">221</a>
  </code>
</div>




    

    

    <h4 class="name" id=".checkPermissionKey">
      <a href="#params-checkPermissionKey"><span class="type-signature">(static) </span>checkPermissionKey</a><span class="signature">(key, done)</span><span class="type-signature"></span>

    </h4>

    













<div class="description">
    <p>Checks a Permission Key.  It also may change the timeout field if on tally mode</p>
</div>








<div class="collapse_" id="methodCollapse-checkPermissionKey">

  

  

<!-- details.tmpl -->







  <div class="bs-callout bs-callout-warning">
    <h5>Deprecated</h5>
    since version 0.10
  </div>


<dl class="dl-horizontal">

    

    

    

    

    

    

    

    

    

    

    

    
</dl>








  <div id="params-checkPermissionKey" class="bs-callout bs-callout-primary">
    <h5>Parameters</h5>
    <!--params.tmpl-->


<table class="table table-bordered">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>key</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>the key to check.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>done</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            

            

            <td class="description last"><p>Callback.</p></td>
        </tr>

    
    </tbody>
</table>

  </div>



















</div>

<!--
<pre>
{"comment":"/**\r\n     * Checks a Permission Key.  It also may change the timeout field if on tally mode\r\n     * @link module:js/security\r\n     * @deprecated since version 0.10\r\n     * @param {string} key - the key to check.\r\n     * @param {function} done - Callback.\r\n     */","meta":{"range":[9162,11481],"filename":"security.js","lineno":221,"columnno":0,"path":"/home/travis/build/poster983/Passport-Live/modules/passport-api","code":{"id":"astnode100011318","name":"exports.checkPermissionKey","type":"FunctionExpression","paramnames":["key","done"]},"vars":{"":null},"shortpath":"modules/passport-api/security.js"},"description":"<p>Checks a Permission Key.  It also may change the timeout field if on tally mode</p>","tags":[{"originalTitle":"link","title":"link","text":"module:js/security","value":"module:js/security"}],"deprecated":"since version 0.10","params":[{"type":{"names":["string"]},"description":"<p>the key to check.</p>","name":"key"},{"type":{"names":["function"]},"description":"<p>Callback.</p>","name":"done"}],"name":"checkPermissionKey","longname":"module:js/security.checkPermissionKey","kind":"function","memberof":"module:js/security","scope":"static","___id":"T000002R000735","___s":true,"attribs":"<span class=\"type-signature\">(static) </span>","id":".checkPermissionKey","signature":"<span class=\"signature\">(key, done)</span><span class=\"type-signature\"></span>","ancestors":["<a href=\"module-js_security.html\">js/security</a>."]}
</pre>
-->
</div>

        
            <!--method.tmpl-->
<div class="method-details">



  <!--source-link.tmpl-->


<div class="pull-right source-link-container">
  <code class="source-link" data-tmpl="method-tmpl(1)">
    <i class="fa fa-file-o"></i>
    <a href="modules_passport-api_security.js.html">security.js</a>:<a href="modules_passport-api_security.js.html#line336">336</a>
  </code>
</div>




    

    

    <h4 class="name" id=".checkPermissionKeyValidity">
      <a href="#params-checkPermissionKeyValidity"><span class="type-signature">(static) </span>checkPermissionKeyValidity</a><span class="signature">(type, key)</span><span class="type-signature"> &rarr; {Promise}</span>

    </h4>

    













<div class="description">
    <p>Checks if Permission Key is Valid according to the timeout field.  DOES NOT INCREASE TALLY.
Will not check if key payload is in the correct format Except for the timeout field.</p>
</div>








<div class="collapse_" id="methodCollapse-checkPermissionKeyValidity">

  

  

<!-- details.tmpl -->








<dl class="dl-horizontal">

    

    

    

    

    

    

    

    

    

    

    

    
</dl>








  <div id="params-checkPermissionKeyValidity" class="bs-callout bs-callout-primary">
    <h5>Parameters</h5>
    <!--params.tmpl-->


<table class="table table-bordered">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>type</code></td>
            

            <td class="type">
            
                
<span class="param-type">permissionKeyType</span>


            
            </td>

            

            

            <td class="description last"><p>enum</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>key</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>the key to check.</p></td>
        </tr>

    
    </tbody>
</table>

  </div>













  <div class="bs-callout bs-callout-success">
    <h5>Returns </h5>

        
<div class="param-desc">
    <ul>
<li>returns either null or the key data</li>
</ul>
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    
</div>
  






</div>

<!--
<pre>
{"comment":"/**\r\n * Checks if Permission Key is Valid according to the timeout field.  DOES NOT INCREASE TALLY.\r\n * Will not check if key payload is in the correct format Except for the timeout field. \r\n * @link module:js/security\r\n * @param {permissionKeyType} type - enum\r\n * @param {string} key - the key to check.\r\n * @returns {Promise} - returns either null or the key data\r\n */","meta":{"range":[13165,14214],"filename":"security.js","lineno":336,"columnno":0,"path":"/home/travis/build/poster983/Passport-Live/modules/passport-api","code":{"id":"astnode100011745","name":"exports.checkPermissionKeyValidity","type":"ArrowFunctionExpression","paramnames":["type","key"]},"vars":{"":null},"shortpath":"modules/passport-api/security.js"},"description":"<p>Checks if Permission Key is Valid according to the timeout field.  DOES NOT INCREASE TALLY.\nWill not check if key payload is in the correct format Except for the timeout field.</p>","tags":[{"originalTitle":"link","title":"link","text":"module:js/security","value":"module:js/security"}],"params":[{"type":{"names":["permissionKeyType"]},"description":"<p>enum</p>","name":"type"},{"type":{"names":["string"]},"description":"<p>the key to check.</p>","name":"key"}],"returns":[{"type":{"names":["Promise"]},"description":"<ul>\n<li>returns either null or the key data</li>\n</ul>"}],"name":"checkPermissionKeyValidity","longname":"module:js/security.checkPermissionKeyValidity","kind":"function","memberof":"module:js/security","scope":"static","___id":"T000002R000762","___s":true,"attribs":"<span class=\"type-signature\">(static) </span>","id":".checkPermissionKeyValidity","signature":"<span class=\"signature\">(type, key)</span><span class=\"type-signature\"> &rarr; {Promise}</span>","ancestors":["<a href=\"module-js_security.html\">js/security</a>."]}
</pre>
-->
</div>

        
            <!--method.tmpl-->
<div class="method-details">



  <!--source-link.tmpl-->


<div class="pull-right source-link-container">
  <code class="source-link" data-tmpl="method-tmpl(1)">
    <i class="fa fa-file-o"></i>
    <a href="modules_passport-api_security.js.html">security.js</a>:<a href="modules_passport-api_security.js.html#line398">398</a>
  </code>
</div>




    

    

    <h4 class="name" id=".cleanDB">
      <a href="#params-cleanDB"><span class="type-signature">(static) </span>cleanDB</a><span class="signature">()</span><span class="type-signature"> &rarr; {Promise}</span>

    </h4>

    













<div class="description">
    <p>Removes all timedout keys and keys with tally &lt;= 0</p>
</div>








<div class="collapse_" id="methodCollapse-cleanDB">

  

  

<!-- details.tmpl -->








<dl class="dl-horizontal">

    

    

    

    

    

    

    

    

    

    

    

    
</dl>




















  <div class="bs-callout bs-callout-success">
    <h5>Returns </h5>

        
<div class="param-desc">
    <ul>
<li>returns transaction</li>
</ul>
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    
</div>
  






</div>

<!--
<pre>
{"comment":"/**\r\n * Removes all timedout keys and keys with tally <= 0 \r\n * @link module:js/security\r\n * @returns {Promise} - returns transaction\r\n */","meta":{"range":[15133,15370],"filename":"security.js","lineno":398,"columnno":0,"path":"/home/travis/build/poster983/Passport-Live/modules/passport-api","code":{"id":"astnode100011954","name":"exports.cleanDB","type":"ArrowFunctionExpression","paramnames":[]},"vars":{"":null},"shortpath":"modules/passport-api/security.js"},"description":"<p>Removes all timedout keys and keys with tally &lt;= 0</p>","tags":[{"originalTitle":"link","title":"link","text":"module:js/security","value":"module:js/security"}],"returns":[{"type":{"names":["Promise"]},"description":"<ul>\n<li>returns transaction</li>\n</ul>"}],"name":"cleanDB","longname":"module:js/security.cleanDB","kind":"function","memberof":"module:js/security","scope":"static","___id":"T000002R000774","___s":true,"attribs":"<span class=\"type-signature\">(static) </span>","id":".cleanDB","signature":"<span class=\"signature\">()</span><span class=\"type-signature\"> &rarr; {Promise}</span>","ancestors":["<a href=\"module-js_security.html\">js/security</a>."]}
</pre>
-->
</div>

        
            <!--method.tmpl-->
<div class="method-details">



  <!--source-link.tmpl-->


<div class="pull-right source-link-container">
  <code class="source-link" data-tmpl="method-tmpl(1)">
    <i class="fa fa-file-o"></i>
    <a href="modules_passport-api_security.js.html">security.js</a>:<a href="modules_passport-api_security.js.html#line68">68</a>
  </code>
</div>




    

    

    <h4 class="name" id=".createPermissionKey">
      <a href="#params-createPermissionKey"><span class="type-signature">(static) </span>createPermissionKey</a><span class="signature">(type, permissions, params, timeout)</span><span class="type-signature"> &rarr; {Promise}</span>

    </h4>

    













<div class="description">
    <p>Creates a New Permission Key.</p>
</div>








<div class="collapse_" id="methodCollapse-createPermissionKey">

  

  

<!-- details.tmpl -->








<dl class="dl-horizontal">

    

    

    

    

    

    

    

    

    

    

    

    
</dl>








  <div id="params-createPermissionKey" class="bs-callout bs-callout-primary">
    <h5>Parameters</h5>
    <!--params.tmpl-->


<table class="table table-bordered">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>type</code></td>
            

            <td class="type">
            
                
<span class="param-type">permissionKeyType</span>


            
            </td>

            

            

            <td class="description last"><p>ENUM for the type of permission key this is.  Each may impose diffrent requirements.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>permissions</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last"><p>Json tree of permissions.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>params</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>timeout</code></td>
            

            <td class="type">
            
                
<span class="param-type">undefined</span>
|

<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last"><p>When should the key become invalid.</p>
                <h6>Properties</h6>
                <!--params.tmpl-->


<table class="table table-bordered">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>tally</code></td>
            

            <td class="type">
            
                
<span class="param-type">undefined</span>
|

<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last"><p>Will become inactive after given number of uses.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>time</code></td>
            

            <td class="type">
            
                
<span class="param-type">undefined</span>
|

<span class="param-type">Date</span>
|

<span class="param-type">ISO</span>


            
            </td>

            

            

            <td class="description last"><p>Will become inactive after given time.</p></td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    
    </tbody>
</table>

  </div>













  <div class="bs-callout bs-callout-success">
    <h5>Returns </h5>

        


<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    
</div>
  






</div>

<!--
<pre>
{"comment":"/**\r\n     * Creates a New Permission Key.\r\n     * @link module:js/security\r\n     * @param {permissionKeyType} type - ENUM for the type of permission key this is.  Each may impose diffrent requirements.\r\n     * @param {Object} permissions - Json tree of permissions.\r\n     * @param {Object} params\r\n     * @param {(undefined|Object)} timeout - When should the key become invalid.\r\n     * @param {(undefined|number)} timeout.tally - Will become inactive after given number of uses.\r\n     * @param {(undefined|Date|ISO)} timeout.time - Will become inactive after given time.\r\n     * @returns {Promise}\r\n     */","meta":{"range":[2212,4858],"filename":"security.js","lineno":68,"columnno":4,"path":"/home/travis/build/poster983/Passport-Live/modules/passport-api","code":{"id":"astnode100010813","name":"exports.createPermissionKey","type":"FunctionExpression","paramnames":["type","permissions","params","timeout"]},"vars":{"":null},"shortpath":"modules/passport-api/security.js"},"description":"<p>Creates a New Permission Key.</p>","tags":[{"originalTitle":"link","title":"link","text":"module:js/security","value":"module:js/security"}],"params":[{"type":{"names":["permissionKeyType"]},"description":"<p>ENUM for the type of permission key this is.  Each may impose diffrent requirements.</p>","name":"type"},{"type":{"names":["Object"]},"description":"<p>Json tree of permissions.</p>","name":"permissions"},{"type":{"names":["Object"]},"name":"params"},{"type":{"names":["undefined","Object"]},"description":"<p>When should the key become invalid.</p>","name":"timeout","subparams":[{"type":{"names":["undefined","number"]},"description":"<p>Will become inactive after given number of uses.</p>","name":"tally"},{"type":{"names":["undefined","Date","ISO"]},"description":"<p>Will become inactive after given time.</p>","name":"time"}]},null,null],"returns":[{"type":{"names":["Promise"]}}],"name":"createPermissionKey","longname":"module:js/security.createPermissionKey","kind":"function","memberof":"module:js/security","scope":"static","___id":"T000002R000697","___s":true,"attribs":"<span class=\"type-signature\">(static) </span>","id":".createPermissionKey","signature":"<span class=\"signature\">(type, permissions, params, timeout)</span><span class=\"type-signature\"> &rarr; {Promise}</span>","ancestors":["<a href=\"module-js_security.html\">js/security</a>."]}
</pre>
-->
</div>

        
            <!--method.tmpl-->
<div class="method-details">



  <!--source-link.tmpl-->


<div class="pull-right source-link-container">
  <code class="source-link" data-tmpl="method-tmpl(1)">
    <i class="fa fa-file-o"></i>
    <a href="modules_passport-api_security.js.html">security.js</a>:<a href="modules_passport-api_security.js.html#line289">289</a>
  </code>
</div>




    

    

    <h4 class="name" id=".getPermissionKeyData">
      <a href="#params-getPermissionKeyData"><span class="type-signature">(static) </span>getPermissionKeyData</a><span class="signature">(type, key, done)</span><span class="type-signature"></span>

    </h4>

    













<div class="description">
    <p>Gets Permission Key data.</p>
</div>








<div class="collapse_" id="methodCollapse-getPermissionKeyData">

  

  

<!-- details.tmpl -->








<dl class="dl-horizontal">

    

    

    

    

    

    

    

    

    

    

    

    
</dl>








  <div id="params-getPermissionKeyData" class="bs-callout bs-callout-primary">
    <h5>Parameters</h5>
    <!--params.tmpl-->


<table class="table table-bordered">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>type</code></td>
            

            <td class="type">
            
                
<span class="param-type">permissionKeyType</span>


            
            </td>

            

            

            <td class="description last"><p>enum</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>key</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>the key to check.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>done</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            

            

            <td class="description last"><p>Callback.</p></td>
        </tr>

    
    </tbody>
</table>

  </div>



















</div>

<!--
<pre>
{"comment":"/**\r\n * Gets Permission Key data.\r\n * @link module:js/security\r\n * @param {permissionKeyType} type - enum\r\n * @param {string} key - the key to check.\r\n * @param {function} done - Callback.\r\n */","meta":{"range":[11680,12786],"filename":"security.js","lineno":289,"columnno":0,"path":"/home/travis/build/poster983/Passport-Live/modules/passport-api","code":{"id":"astnode100011582","name":"exports.getPermissionKeyData","type":"FunctionExpression","paramnames":["type","key","done"]},"vars":{"err":"module:js/security.getPermissionKeyData~err","err.status":"module:js/security.getPermissionKeyData~err.status","":null},"shortpath":"modules/passport-api/security.js"},"description":"<p>Gets Permission Key data.</p>","tags":[{"originalTitle":"link","title":"link","text":"module:js/security","value":"module:js/security"}],"params":[{"type":{"names":["permissionKeyType"]},"description":"<p>enum</p>","name":"type"},{"type":{"names":["string"]},"description":"<p>the key to check.</p>","name":"key"},{"type":{"names":["function"]},"description":"<p>Callback.</p>","name":"done"}],"name":"getPermissionKeyData","longname":"module:js/security.getPermissionKeyData","kind":"function","memberof":"module:js/security","scope":"static","___id":"T000002R000751","___s":true,"attribs":"<span class=\"type-signature\">(static) </span>","id":".getPermissionKeyData","signature":"<span class=\"signature\">(type, key, done)</span><span class=\"type-signature\"></span>","ancestors":["<a href=\"module-js_security.html\">js/security</a>."]}
</pre>
-->
</div>

        
            <!--method.tmpl-->
<div class="method-details">



  <!--source-link.tmpl-->


<div class="pull-right source-link-container">
  <code class="source-link" data-tmpl="method-tmpl(1)">
    <i class="fa fa-file-o"></i>
    <a href="modules_passport-api_security.js.html">security.js</a>:<a href="modules_passport-api_security.js.html#line378">378</a>
  </code>
</div>




    

    

    <h4 class="name" id=".keyUsed">
      <a href="#params-keyUsed"><span class="type-signature">(static) </span>keyUsed</a><span class="signature">(type, key)</span><span class="type-signature"> &rarr; {Promise}</span>

    </h4>

    













<div class="description">
    <p>If the key has a tally on it, it will subtract 1 from it.  WILL NOT STOP THE TALLY FROM GOING PAST 0.  THIS IS INTENDED BEHAVIOUR</p>
</div>








<div class="collapse_" id="methodCollapse-keyUsed">

  

  

<!-- details.tmpl -->








<dl class="dl-horizontal">

    

    

    

    

    

    

    

    

    

    

    

    
</dl>








  <div id="params-keyUsed" class="bs-callout bs-callout-primary">
    <h5>Parameters</h5>
    <!--params.tmpl-->


<table class="table table-bordered">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>type</code></td>
            

            <td class="type">
            
                
<span class="param-type">permissionKeyType</span>


            
            </td>

            

            

            <td class="description last"><p>enum</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>key</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>the key to check.</p></td>
        </tr>

    
    </tbody>
</table>

  </div>













  <div class="bs-callout bs-callout-success">
    <h5>Returns </h5>

        
<div class="param-desc">
    <ul>
<li>returns transaction</li>
</ul>
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    
</div>
  






</div>

<!--
<pre>
{"comment":"/**\r\n * If the key has a tally on it, it will subtract 1 from it.  WILL NOT STOP THE TALLY FROM GOING PAST 0.  THIS IS INTENDED BEHAVIOUR\r\n * @link module:js/security\r\n * @param {permissionKeyType} type - enum\r\n * @param {string} key - the key to check.\r\n * @returns {Promise} - returns transaction\r\n */","meta":{"range":[14527,14858],"filename":"security.js","lineno":378,"columnno":0,"path":"/home/travis/build/poster983/Passport-Live/modules/passport-api","code":{"id":"astnode100011892","name":"exports.keyUsed","type":"ArrowFunctionExpression","paramnames":["type","key"]},"vars":{"":null},"shortpath":"modules/passport-api/security.js"},"description":"<p>If the key has a tally on it, it will subtract 1 from it.  WILL NOT STOP THE TALLY FROM GOING PAST 0.  THIS IS INTENDED BEHAVIOUR</p>","tags":[{"originalTitle":"link","title":"link","text":"module:js/security","value":"module:js/security"}],"params":[{"type":{"names":["permissionKeyType"]},"description":"<p>enum</p>","name":"type"},{"type":{"names":["string"]},"description":"<p>the key to check.</p>","name":"key"}],"returns":[{"type":{"names":["Promise"]},"description":"<ul>\n<li>returns transaction</li>\n</ul>"}],"name":"keyUsed","longname":"module:js/security.keyUsed","kind":"function","memberof":"module:js/security","scope":"static","___id":"T000002R000767","___s":true,"attribs":"<span class=\"type-signature\">(static) </span>","id":".keyUsed","signature":"<span class=\"signature\">(type, key)</span><span class=\"type-signature\"> &rarr; {Promise}</span>","ancestors":["<a href=\"module-js_security.html\">js/security</a>."]}
</pre>
-->
</div>

        
            <!--method.tmpl-->
<div class="method-details">



  <!--source-link.tmpl-->


<div class="pull-right source-link-container">
  <code class="source-link" data-tmpl="method-tmpl(1)">
    <i class="fa fa-file-o"></i>
    <a href="modules_passport-api_security.js.html">security.js</a>:<a href="modules_passport-api_security.js.html#line167">167</a>
  </code>
</div>




    

    

    <h4 class="name" id=".newKey.activateAccount">
      <a href="#params-newKey.activateAccount"><span class="type-signature">(static) </span>newKey.activateAccount</a><span class="signature">(id)</span><span class="type-signature"> &rarr; {Promise}</span>

    </h4>

    













<div class="description">
    <p>Creates a New Permission Key For Activating New Accounts From email</p>
</div>








<div class="collapse_" id="methodCollapse-newKey.activateAccount">

  

  

<!-- details.tmpl -->








<dl class="dl-horizontal">

    

    

    

    

    

    

    

    

    

    

    

    
</dl>








  <div id="params-newKey.activateAccount" class="bs-callout bs-callout-primary">
    <h5>Parameters</h5>
    <!--params.tmpl-->


<table class="table table-bordered">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>id</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last"><p>Account id that this key will work for.</p></td>
        </tr>

    
    </tbody>
</table>

  </div>













  <div class="bs-callout bs-callout-success">
    <h5>Returns </h5>

        
<div class="param-desc">
    <p>-key</p>
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    
</div>
  






</div>

<!--
<pre>
{"comment":"/**\r\n     * Creates a New Permission Key For Activating New Accounts From email\r\n     * @function\r\n     * @memberof module:js/security\r\n     * @param {String} id - Account id that this key will work for.\r\n     * @returns {Promise} -key\r\n     */","meta":{"range":[6420,7006],"filename":"security.js","lineno":167,"columnno":4,"path":"/home/travis/build/poster983/Passport-Live/modules/passport-api","code":{"id":"astnode100011128","name":"newKey.activateAccount","type":"FunctionExpression","paramnames":["id"]},"vars":{"":null},"shortpath":"modules/passport-api/security.js"},"description":"<p>Creates a New Permission Key For Activating New Accounts From email</p>","kind":"function","memberof":"module:js/security","params":[{"type":{"names":["String"]},"description":"<p>Account id that this key will work for.</p>","name":"id"}],"returns":[{"type":{"names":["Promise"]},"description":"<p>-key</p>"}],"name":"newKey.activateAccount","longname":"module:js/security.newKey.activateAccount","scope":"static","___id":"T000002R000720","___s":true,"attribs":"<span class=\"type-signature\">(static) </span>","id":".newKey.activateAccount","signature":"<span class=\"signature\">(id)</span><span class=\"type-signature\"> &rarr; {Promise}</span>","ancestors":["<a href=\"module-js_security.html\">js/security</a>."]}
</pre>
-->
</div>

        
            <!--method.tmpl-->
<div class="method-details">



  <!--source-link.tmpl-->


<div class="pull-right source-link-container">
  <code class="source-link" data-tmpl="method-tmpl(1)">
    <i class="fa fa-file-o"></i>
    <a href="modules_passport-api_security.js.html">security.js</a>:<a href="modules_passport-api_security.js.html#line154">154</a>
  </code>
</div>




    

    

    <h4 class="name" id=".newKey.newAccount">
      <a href="#params-newKey.newAccount"><span class="type-signature">(static) </span>newKey.newAccount</a><span class="signature">(userGroups, timeout)</span><span class="type-signature"> &rarr; {Promise}</span>

    </h4>

    













<div class="description">
    <p>Creates a New Permission Key For Creating New Accounts from the new account form and API</p>
</div>








<div class="collapse_" id="methodCollapse-newKey.newAccount">

  

  

<!-- details.tmpl -->








<dl class="dl-horizontal">

    

    

    

    

    

    

    

    

    

    

    

    
</dl>








  <div id="params-newKey.newAccount" class="bs-callout bs-callout-primary">
    <h5>Parameters</h5>
    <!--params.tmpl-->


<table class="table table-bordered">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>userGroups</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array.&lt;String></span>


            
            </td>

            

            

            <td class="description last"><p>Must only contain valid userGroup keys defined in the configs.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>timeout</code></td>
            

            <td class="type">
            
                
<span class="param-type">undefined</span>
|

<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last"><p>When should the key become invalid.</p>
                <h6>Properties</h6>
                <!--params.tmpl-->


<table class="table table-bordered">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>tally</code></td>
            

            <td class="type">
            
                
<span class="param-type">undefined</span>
|

<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last"><p>Will become inactive after given number of uses.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>time</code></td>
            

            <td class="type">
            
                
<span class="param-type">undefined</span>
|

<span class="param-type">Date</span>
|

<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>Will become inactive after given time.</p></td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    
    </tbody>
</table>

  </div>













  <div class="bs-callout bs-callout-success">
    <h5>Returns </h5>

        
<div class="param-desc">
    <ul>
<li>key</li>
</ul>
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    
</div>
  






</div>

<!--
<pre>
{"comment":"/**\r\n     * Creates a New Permission Key For Creating New Accounts from the new account form and API\r\n     * @function\r\n     * @memberof module:js/security\r\n     * @param {String[]} userGroups - Must only contain valid userGroup keys defined in the configs.\r\n     * @param {(undefined|Object)} timeout - When should the key become invalid.\r\n     * @param {(undefined|number)} timeout.tally - Will become inactive after given number of uses.\r\n     * @param {(undefined|Date|string)} timeout.time - Will become inactive after given time.\r\n     * @returns {Promise} - key \r\n     */","meta":{"range":[5883,6161],"filename":"security.js","lineno":154,"columnno":4,"path":"/home/travis/build/poster983/Passport-Live/modules/passport-api","code":{"id":"astnode100011089","name":"newKey.newAccount","type":"FunctionExpression","paramnames":["userGroups","timeout"]},"vars":{"":null},"shortpath":"modules/passport-api/security.js"},"description":"<p>Creates a New Permission Key For Creating New Accounts from the new account form and API</p>","kind":"function","memberof":"module:js/security","params":[{"type":{"names":["Array.<String>"]},"description":"<p>Must only contain valid userGroup keys defined in the configs.</p>","name":"userGroups"},{"type":{"names":["undefined","Object"]},"description":"<p>When should the key become invalid.</p>","name":"timeout","subparams":[{"type":{"names":["undefined","number"]},"description":"<p>Will become inactive after given number of uses.</p>","name":"tally"},{"type":{"names":["undefined","Date","string"]},"description":"<p>Will become inactive after given time.</p>","name":"time"}]},null,null],"returns":[{"type":{"names":["Promise"]},"description":"<ul>\n<li>key</li>\n</ul>"}],"name":"newKey.newAccount","longname":"module:js/security.newKey.newAccount","scope":"static","___id":"T000002R000718","___s":true,"attribs":"<span class=\"type-signature\">(static) </span>","id":".newKey.newAccount","signature":"<span class=\"signature\">(userGroups, timeout)</span><span class=\"type-signature\"> &rarr; {Promise}</span>","ancestors":["<a href=\"module-js_security.html\">js/security</a>."]}
</pre>
-->
</div>

        
            <!--method.tmpl-->
<div class="method-details">



  <!--source-link.tmpl-->


<div class="pull-right source-link-container">
  <code class="source-link" data-tmpl="method-tmpl(1)">
    <i class="fa fa-file-o"></i>
    <a href="modules_passport-api_security.js.html">security.js</a>:<a href="modules_passport-api_security.js.html#line186">186</a>
  </code>
</div>




    

    

    <h4 class="name" id=".newKey.resetPassword">
      <a href="#params-newKey.resetPassword"><span class="type-signature">(static) </span>newKey.resetPassword</a><span class="signature">(id)</span><span class="type-signature"> &rarr; {Promise}</span>

    </h4>

    













<div class="description">
    <p>Creates a New Permission Key For resetting a forgotten password Accounts From email. Times out after 1 hour</p>
</div>








<div class="collapse_" id="methodCollapse-newKey.resetPassword">

  

  

<!-- details.tmpl -->








<dl class="dl-horizontal">

    

    

    

    

    

    

    

    

    

    

    

    
</dl>








  <div id="params-newKey.resetPassword" class="bs-callout bs-callout-primary">
    <h5>Parameters</h5>
    <!--params.tmpl-->


<table class="table table-bordered">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>id</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last"><p>Account id that this key will work for.</p></td>
        </tr>

    
    </tbody>
</table>

  </div>













  <div class="bs-callout bs-callout-success">
    <h5>Returns </h5>

        
<div class="param-desc">
    <ul>
<li>key</li>
</ul>
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    
</div>
  






</div>

<!--
<pre>
{"comment":"/**\r\n     * Creates a New Permission Key For resetting a forgotten password Accounts From email. Times out after 1 hour\r\n     * @function\r\n     * @memberof module:js/security\r\n     * @param {String} id - Account id that this key will work for.\r\n     * @returns {Promise} - key\r\n     */","meta":{"range":[7305,7875],"filename":"security.js","lineno":186,"columnno":4,"path":"/home/travis/build/poster983/Passport-Live/modules/passport-api","code":{"id":"astnode100011220","name":"newKey.resetPassword","type":"FunctionExpression","paramnames":["id"]},"vars":{"":null},"shortpath":"modules/passport-api/security.js"},"description":"<p>Creates a New Permission Key For resetting a forgotten password Accounts From email. Times out after 1 hour</p>","kind":"function","memberof":"module:js/security","params":[{"type":{"names":["String"]},"description":"<p>Account id that this key will work for.</p>","name":"id"}],"returns":[{"type":{"names":["Promise"]},"description":"<ul>\n<li>key</li>\n</ul>"}],"name":"newKey.resetPassword","longname":"module:js/security.newKey.resetPassword","scope":"static","___id":"T000002R000727","___s":true,"attribs":"<span class=\"type-signature\">(static) </span>","id":".newKey.resetPassword","signature":"<span class=\"signature\">(id)</span><span class=\"type-signature\"> &rarr; {Promise}</span>","ancestors":["<a href=\"module-js_security.html\">js/security</a>."]}
</pre>
-->
</div>

        
    

    

    
</article>

</section>




</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Tue Jan 09 2018 20:10:16 GMT+0000 (UTC) using the LOKE theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>