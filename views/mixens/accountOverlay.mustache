<div id="accountInfo" class="accountInfoOverlay">
  
  <div class="userCardBundle">
    <!--Top Card -->
    <div class="row">
      <div class="col s12 m12 l8 push-l2">
        <div class="card small">
          <div class="card-image">
            <img src="/api/media/background/{{user.id}}.svg">
          </div>
          <div class="card-content">
            <div class="card-avatar">
              <img src="/api/media/avatar/{{user.id}}/100.svg" alt="Avatar" id="userCardBundleAvatar" class="card-avatar circle responsive-img">
            </div>
            <br>
            <span class="card-title black-text center">Salutation. FirstName LastName</span>
          </div>
        </div>
      </div>
    </div>
    <!--Universal Info -->
    <div class="row">
      <div class="col s12 m12 l4 push-l2">
        <div class="card">
          <div class="card-content">
           <span class="card-title">Universal Info</span>
             <span title="Account ID"><i class="material-icons">perm_identity</i> <strong>4564651asd654f56ds4564</strong></span>
             <br><br>
             <span><i class="material-icons">email</i> <strong>josephh2018@gmail.com</strong></span>
          </div>
        </div>
      </div>

    <!--Current Location Info -->
      <div class="col s12 m12 l4 push-l2">
        <div class="card">
          <div class="card-content">
           <span class="card-title">Current Location</span>
             Coming Soon
          </div>
        </div>
      </div>
    </div>

    <div class="row" >
      <div class="col s12 m12 l8 push-l2">
        <div class="card" >
           
          <div class="card-content">
            <span class="card-title">Schedule</span>
            <table class="highlight responsive-table">
              <thead>
                <tr>
                    <th>Period</th>
                    <th>Class</th>
                    <th>Teacher</th>
                    <th>Room</th>
                </tr>
              </thead>

              <tbody>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

  </div>
</div>


<script type="text/javascript">
  /*
  let accountOverlay = {};
  accountOverlay._compile = {};

  accountOverlay.new = function(id) {
    
  }

  //Private
  accountOverlay._compile.topCard = function(nameJson, )
  */



  let AccountOverlay = (function() {
    let _userID = new WeakMap();
    let _user = new WeakMap();
    class AccountOverlay {
      constructor(userID, done) {
        _userID.set(this, userID);
        console.log(this)
        $.ajax({
          type: "get",
          url: "/api/account/id/" + userID + "/",
          dataType: "json",
          beforeSend: function(xhr){xhr.setRequestHeader('X-XSRF-TOKEN', getCookie("XSRF-TOKEN"));},
          success: function(data) {_user.set(this, data); done(null)}.bind(this),
          error: function(jqXHR) {done(jqXHR)}                      
        });
      };

      get user() {
        return _user.get(this);
      };

      topCard() {
        var top = $("<div/>").addClass("col s12 m12 l8 push-l2");

        var image = $("<div/>")
                      .addClass("card-image")
                      .append(
                        $("<img/>")
                          .attr("src", "/api/media/background/" + _user.get(this).id + ".svg")
                      )

        var cont = $("<div/>")
                      .addClass("card-content")
                      .append(
                        $("<div/>")
                          .addClass("card-avatar")
                          .append(
                            $("<img/>")
                              .addClass("card-avatar circle responsive-img")
                              .attr("alt", "Avatar")
                              .attr("src", "/api/media/avatar/" + _user.get(this).id + "/100.svg")
                          )
                      ).append(
                        $("<br/>")
                      ).append(
                        $("<span/>")
                        .addClass("card-title black-text center")
                        .html(_user.get(this).name.salutation + " " + _user.get(this).name.first + " " + _user.get(this).name.last)
                      )


        return top.append($("<div/>").addClass("card small")
                  .append(image)
                  .append(cont)
                )
      }

      universalInfoCard() {
        var top = $("<div/>").addClass("col s12 m12 l4 push-l2");
        var id = $("<span/>")
                        .attr("title", "Account ID") 
                        .prepend($("<i/>").addClass("material-icons").html("perm_identity"))
                        .append($("<strong/>").html(_user.get(this).id))
        var email = $("<span/>")
                        .attr("title", "Email") 
                        .prepend($("<i/>").addClass("material-icons").html("email"))
                        .append($("<strong/>").html(_user.get(this).email))
        var cont = $("<div/>")
                      .addClass("card-content")
                      .append($("<span/>").addClass("card-title").html("Universal Info"))
                      .append(id)
                      .append($("<br/>"))
                      .append($("<br/>"))
                      .append(email)

        return top.append($("<div/>").addClass("card")
            .append(cont)
          )
      }

      currentLocationCard() {
        
      }

    };
    return AccountOverlay;
 }());

  
</script>