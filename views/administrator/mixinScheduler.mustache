<!--
Passport-Live is a modern web app for schools that helps them manage passes.
    Copyright (C) 2017  Joseph Hassell

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU Affero General Public License as published
    by the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU Affero General Public License for more details.

    You should have received a copy of the GNU Affero General Public License
    along with this program.  If not, see <http://www.gnu.org/licenses/>.

email: hi@josephhassell.com
-->
<nav>
    <div class="nav-wrapper">
      <a href="#" class="brand-logo right">Schedule Editor</a>
      <a href="#" onclick="closePage('scheduleEditor')"><i class=" left-allign nav-sandwich material-icons">arrow_back</i></a>
    </div>
</nav>
<div class="container">
  <div id="cal"> 
    <div class="row">
      <div class="col s12">
        <div class="card">
          <div class="card-content">
            <span class="card-title">New Schedule</span>
           
            <table class="striped">
                <thead>
                    <tr>
                        <th>Period Name</th>
                        <th>Start Time</th>
                        <th>End Time</th>
                    </tr>
                </thead>
                <tbody id="scheduleEditorBody">
                    <tr>
                        <td>
                            A
                        </td>
                        <td>
                            <input type="text" class="timepicker">
                        </td>
                        <td>
                            <input type="text" class="timepicker">
                        </td>
                    </tr>
                </tbody>
            </table>
          </div>
          <div class="card-action">
            <a href="#">Save</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript">

var se = {}
se.getPeriodConstants = function(done) {
    $.ajax({
      type: "get",
      url: "/api/server/config/schedule/",
      dataType: "json",
      beforeSend: function(xhr){xhr.setRequestHeader('X-XSRF-TOKEN', getCookie("XSRF-TOKEN"));},
      success: function(data) {done(null, data)},
      error: function(jqXHR) {done(jqXHR)}                      
    });
}

se.initNewSchedule = function() {
  se.getPeriodConstants(function(err, periods) {
    if(err) {
      return errorHand(err);
    }
    for(var x = 0; x < periods.periods.length; x++) {
      $("#scheduleEditorBody").append("HIIIII")
    }
  })
}
</script>